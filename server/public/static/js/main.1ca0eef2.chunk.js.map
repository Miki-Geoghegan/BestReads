{"version":3,"sources":["components/Navbar/Navbar.jsx","services/ebook.services.js","images/default.jpeg","services/shelves.services.js","components/Book/BookEbook.jsx","pages/ebooks/CreateEbook.page.jsx","utils/consts.js","services/auth.js","pages/Home.page.js","pages/authPages/Signup.jsx","utils/paths.js","pages/authPages/LogIn.page.jsx","services/api.services.js","components/DropdownButton/DropdownButton.js","pages/search/SearchResults.page.js","components/Loading/index.jsx","pages/search/Search.page.js","routing-components/NormalRoute.jsx","routing-components/ProtectedRoute.jsx","components/Test.js","pages/ebooks/Read.page.js","services/review.services.js","components/Reviews/NewReview.jsx","pages/bookDetails/BookDetails.page.js","pages/bookshelves/PrivateBookshelf.page.js","pages/bookshelves/PublicBookShelf.page.js","App.js","index.js"],"names":["Navbar","props","user","useState","ulState","setUl","burgerState","setBurger","toggle","to","className","onClick","id","class","activeClassName","handleLogout","internalServerError","err","status","errorMessage","successStatus","res","data","service","axios","create","baseURL","process","console","log","publicService","withCredentials","privateService","saveToPublic","shelf","book","info","put","then","catch","BookEbook","shelves","bookshelf","updateUser","action","bsType","toDo","args","bookId","shelfId","deleteBook","delete","movePrivate","style","cover","backgroundImage","backgroundRepeat","backgroundPosition","backgroundSize","eBookReader","ebookUrl","_id","target","position","top","right","bottom","left","width","height","coverUrl","Default","alt","coverFlip","onChange","event","value","shelfFrom","shelfTo","selected","disabled","label","map","name","title","CreateEbook","privateBookshelf","find","initialState","author","owner","formData","setFormData","notify","message","toast","warning","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","error","handleChange","onSubmit","ebookDetails","preventDefault","post","htmlFor","type","placeholder","required","window","cloudinary","createUploadWidget","cloudName","uploadPreset","cropping","result","secure_url","getCoverUrl","open","getEbookUrl","ACCESS_TOKEN","APP_NAME","toUpperCase","slice","toLowerCase","authService","getLoggedIn","get","headers","Authorization","localStorage","getItem","CONSTS","HomePage","src","Signup","username","email","password","imageUrl","credentials","setItem","accessToken","authenticate","history","push","minLength","LogIn","login","URITemplate","require","main","mainSearch","search","notEmpty","Object","entries","filter","backToObj","fromEntries","searchOptions","searchUrl","expand","q","buildUrl","DropdownButton","publicBookshelf","SearchResults","results","eachDoc","pathname","query","LoadingComponent","Search","subject","place","person","language","publisher","searchState","setSearch","setToggle","loading","setLoading","setResults","handleSubmit","apiSearches","docs","eachWork","author_name","key","replace","olLink","cover_edition_key","for","pattern","href","e","NormalRoute","exact","path","component","componentProps","Component","render","ProtectedRoute","Test","Reader","ebookId","match","params","ebook","setEbook","useEffect","getEbookDetails","url","location","locationChanged","epubcifi","NewReview","initialFormState","comment","rating","formState","setFormState","ratingSelect","form","createReview","review","cols","rows","BookDetails","bookState","setBookState","reviewsState","setReviews","bookID","allReviews","eachReview","PrivateBookShelf","setUser","setPrivateBookshelf","setPrivateBS","bookshelfState","setState","length","ebooks","eachBook","PublicBookShelf","setPublicBookshelf","setPublicBS","books","App","removeItem","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.1ca0eef2.chunk.js","sourcesContent":["import React, {useState} from 'react';\nimport { Link } from 'react-router-dom';\nimport { MdClose } from \"react-icons/md\"\nimport { FiMenu } from \"react-icons/fi\"\n\nimport \"./NavbarTest.css\"\n\n\n//login / logout \n//search\n//public bookshelf\n//private bookshelf\n//create ebook\n//user page\n\nconst Navbar = (props) => {\n\tconst {user} = props\n\tconst [navbarOpen, setNavbarOpen] = useState(false)\n\tconst [ulState, setUl] = useState(\"\")\n\tconst [burgerState, setBurger] = useState(\"\")\n\n\tconst handleToggle = () => {\n\t\tsetNavbarOpen(prev => !prev)\n\t}\n\tconst closeMenu = () => {\n\t\tsetNavbarOpen(false)\n\t}\n\n\tfunction toggle() {\n\t\tulState === \"\" ? setUl(\"show\") : setUl(\"\")\n\t\tburgerState === \"\" ? setBurger(\"show-x\") : setBurger(\"\")\n\t}\n\n\treturn (\n\n\t\t<nav>\n\t\t\t<Link to='/' className='homeLogo'>Best Reads</Link>\n\n\t<button onClick={toggle} id=\"burger\" className={`burger ${burgerState}`}>\n\t\t<div className=\"bar\"></div>\n\t\t<div className=\"bar\"></div>\n\t</button>\n\t\n\t<ul className={ulState}>\n\t{props.user ? (\n\t\t<>\n\t\t<li><Link to='/' activeClassName='homebutton' onClick={toggle}>Home</Link></li>\n\t\t<li><Link to='/search' activeClassName=\"active-link\" onClick={toggle}>Searchbook</Link></li>\n\t\t<li><Link to='/user/publicBookshelf' activeClassName='authLink' onClick={toggle}>My public bookshelf</Link></li>\n\t\t<li><Link to='/user/privateBookshelf' activeClassName='authLink' onClick={toggle}>My private bookshelf</Link></li>\n\t\t<li><Link to='/ebook/create' activeClassName='authLink' onClick={toggle}>Create an eBook</Link></li>\n\t\t<li><Link className='nav-logoutbtn' onClick={props.handleLogout}>Logout</Link></li>\n\t\t</>\n\t) : (\n\t\t<>\n\t\t<li><Link to='/' className='authLink' onClick={toggle}>Home</Link></li>\n\t\t<li><Link to='/auth/signup' activeClassName='authLink' onClick={toggle}>Signup</Link></li>\n\t\t<li><Link to={'/auth/login'} className='authLink' onClick={toggle}>Log In</Link></li>\n\t\t</>\n\t)}\n\t</ul>\n</nav>\n\n\t)\n\n/* \treturn (\n\t\t<nav className=\"navBar\">\n\t\t\t<div className=\"header\">\n\t\t\t\t<Link to='/' className='homeLogo'>Best Reads</Link>\n\t\t\t</div>\n\t\t\t<button onClick={handleToggle}>\t\t\t\n  \t\t\t\t{navbarOpen ? (\n    \t\t\t<MdClose style={{ color: \"#fff\", width: \"40px\", height: \"40px\" }} />\n  \t\t\t\t) : (\n    \t\t\t<FiMenu style={{ color: \"#7b7b7b\", width: \"40px\", height: \"40px\" }} />\n  \t\t\t\t)}\n\t\t\t</button>\n\t\t\t<div className='nav__authLinks'>\n\t\t\t{props.user ? (\n\t\t\t\t<>\n\t\t\t\t<ul className={`menuNav ${navbarOpen ? \" showMenu\" : \"\"}`}>\n\t\t\t\t\t<li><Link to='/' activeClassName='homebutton' onClick={toggle}>Home</Link></li>\n\n\t\t\t\t\t<li><Link to='/search' activeClassName=\"active-link\" onClick={toggle}>Searchbook</Link></li>\n\n\t\t\t\t\t<li><Link to='/ebook/create' activeClassName='authLink' onClick={toggle}>Create an eBook</Link></li>\n\n\t\t\t\t\t<li><Link to=\"/auth/profile/user\" activeClassName='authLink' onClick={toggle}>User page</Link></li>\n\n\t\t\t\t\t<li><Link to=\"/review/test\" activeClassName='authLink' onClick={toggle}>Review</Link></li>\n\n\t\t\t\t\t<li><Link className='nav-logoutbtn' onClick={props.handleLogout}>Logout</Link></li>\n\t\t\t\t</ul>\n\t\t\t\t</>\n\t\t\t\t) : (\n\t\t\t\t<>\n\t\t\t\t<ul className={`menuNav ${navbarOpen ? \" showMenu\" : \"\"}`}>\n\t\t\t\t\t<li><Link to='/' \tclassName='authLink' onClick={toggle}>Home</Link></li>\n\t\t\t\t\t<li><Link to='/auth/signup' activeClassName='authLink' onClick={toggle}>Signup</Link></li>\n\n\t\t\t\t\t<li><Link to={'/auth/login'} className='authLink' onClick={toggle}>Log In</Link></li>\n\n\t\t\t\t</ul>\n\t\t\t\t</>\n\t\t\t\t\n\t\t\t\t)}\n\t\t\t</div> \n\t\t</nav>\n\n\t); */\n};\n\n\n\nexport default Navbar;\n\n","import axios from 'axios';\n\nfunction internalServerError(err) {\n\treturn {\n\t\tstatus: false,\n\t\terrorMessage: 'Internal server error. Please check your server'\n\t};\n}\n\nfunction successStatus(res) {\n\treturn {\n\t\tstatus: true,\n\t\tdata: res.data\n\t};\n}\n\n// creates a basic url for every request in this file\nconst service = axios.create({\n\tbaseURL: `${process.env.REACT_APP_SERVER_URL}/ebook`\n});\n\n\n//form needs  { title, author, coverUrl, ebookUrl, owner, shelfId}\nexport function createEbook(ebookDetails) {\n    return service.post(\"/create\", ebookDetails)\n    .then(successStatus)\n    .catch(internalServerError)\n}\n\nexport function getEbookDetails(ebookId) {\n    return service.get(`/getBook/${ebookId}`)\n    .then(successStatus)\n    .catch(internalServerError)\n}\n\nexport function editEbook(id, form) {\n    return service.put(`/edit/${id}`, form)\n    .then(successStatus)\n    .catch(internalServerError)\n}\n\nexport function deleteEbook(id) {\n    return service.delete(`/delete/${id}`)\n    .then(successStatus)\n    .catch(internalServerError)\n}\n","export default __webpack_public_path__ + \"static/media/default.b508dd32.jpeg\";","import axios from 'axios';\n\n\n\n\nfunction internalServerError(err) {\n\treturn {\n\t\tstatus: false,\n\t\terrorMessage: 'Internal server error. Please check your server'\n\t};\n}\n\nfunction successStatus(res) {\n\tconsole.log(\"shelves services success!\", res)\n\treturn {\n\t\tstatus: true,\n\t\tdata: res.data\n\t};\n}\n\n\n// Basic url for every request in this file\nconst publicService = axios.create({\n\tbaseURL: `${process.env.REACT_APP_SERVER_URL}/public-shelves`,\n    withCredentials: true\n});\n\n\nconst privateService = axios.create({\n\tbaseURL: `${process.env.REACT_APP_SERVER_URL}/private-shelves`,\n    withCredentials: true\n});\n\n\n//PUBLIC\n\n\n\nexport function saveToPublic(shelf, book) {\n\tconst info = {shelf: shelf, book: book}\n\n\treturn publicService.put(`addBook`, info)\n\t.then(successStatus)\n\t.catch(internalServerError)\n\n}\n\nexport function movePublic(info) {\n\treturn publicService.put(`/moveBook`, info)\n\t.then(successStatus)\n\t.catch(internalServerError)\n\n\n}\n\nexport function deleteBook(shelfId, bookId) {\n\treturn publicService.put(\"/deleteBook\", {shelfId, bookId})\n\t.then(successStatus)\n\t.catch(internalServerError)\n}\n\n\nexport function getPublicShelf(shelfId) {\n\treturn publicService\n\t.get(`/${shelfId}`)\n\t.then(successStatus)\n\t.catch(internalServerError)\n}\n\n\nexport function newPublicShelf(form) {\n\t//form needs {name, ebooks, publicBookshelf}\n\treturn publicService\n\t\t.post(`/create`, form)\n\t\t.then(successStatus)\n\t\t.catch(internalServerError);\n}\n\nexport function editPublicShelf(shelfId, name) {\n\treturn publicService\n\t\t.put(`/${shelfId}/edit`, name)\n\t\t.then(successStatus)\n\t\t.catch(internalServerError);\n}\n\n\n\n\n\n\n\n// PRIVATE\nexport function movePrivate(info) {\n\t\n\tconsole.log(\"service: \", info)\n\treturn privateService.put(`/moveBook`, info)\n\t.then(successStatus)\n\t.catch(internalServerError)\n}\n\nexport function getPrivateShelf(shelfId) {\n\treturn privateService\n\t.get(`/${shelfId}`)\n\t.then(successStatus)\n\t.catch(internalServerError)\n}\n\nexport function newPrivateShelf(form) {\n\t//form needs {name, privateBookshelf}\n\treturn privateService\n\t.post(`/create`, form)\n\t.then(successStatus)\n\t.catch(internalServerError);\n}\n\nexport function editPrivateShelf(shelfId, name) {\n\t//form needs {name}\n\treturn privateService\n\t.put(`/${shelfId}/edit`, name)\n\t.then(successStatus)\n\t.catch(internalServerError);\n}\n\n","import React, { useEffect, useState } from 'react';\nimport Default from \"../../images/default.jpeg\"\nimport \"../../App.css\"\nimport { movePrivate, movePublic } from '../../services/shelves.services';\nimport { editEbook } from '../../services/ebook.services';\nimport { deleteEbook } from '../../services/ebook.services';\nimport { deleteBook } from '../../services/shelves.services';\nimport { Link } from 'react-router-dom';\n\n//actions private: movePrivate, delete, edit\n//actions public: movePublic, delete\n\nfunction BookEbook(props) {\n\t//const {book} = props\n\tconst shelves = props.bookshelf.shelves;\n\tconst book = props.book\n\tconst {updateUser} = props\n\n\tfunction action(bsType, toDo, args) {\n\t\tconst {bookId} = args;\n\t\tconsole.log(toDo)\n\n\t\tif(bsType === \"public\") {\n\t\t\tif (toDo === \"delete\") {return deleteBook(props.shelf, bookId)}\n\t\t\telse {return movePublic(args)}\n\t\t}\n\t\telse {\n\t\t\tif (toDo === \"delete\") {return deleteEbook(bookId)}\n\t\t\telse if (toDo === \"edit\") {console.log(\"edit\")}\n\t\t\telse {return movePrivate(args)}\n\t\t}\n\t}\n\n\n\tfunction style(cover) {\n\t\treturn {\n\t\tbackgroundImage: `url(${cover})`,\n\t\tbackgroundRepeat: \"no-repeat\",\n\t\tbackgroundPosition: \"center\",\n\t\tbackgroundSize: \"cover\"\n\t\t}\n\t}\n\n\tfunction eBookReader(book) {\n\t\tif(book.ebookUrl) return (\n\t\t<Link to={`/reader/${book._id}`} target=\"blank\" className=\"link-tag\" style={{position: \"absolute\", top: 0, right: 0, bottom: 0, left: 0, width: \"100%\", height: \"100%\"}}></Link>\n\t\t)\n\t}\n\n\tfunction coverFlip(book) {\n\n\t\tif(book.ebookUrl) {return (\n\t\t\t<div className=\"flip-card\">\n  \t\t\t\t<div className=\"flip-card-inner\">\n\t\t\t\t\t<div className=\"book-cover flip-card-front\" key={book.coverUrl} style={book.coverUrl ? style(book.coverUrl) : style(Default)} alt=\"book cover\"></div>\n    \t\t\t\t<div className=\"flip-card-back\">\n\t\t\t\t\t\t{eBookReader(book)}\n    \t\t\t\t</div>\n  \t\t\t\t</div>\n\t\t\t</div>\n\t\t)}\n\t\telse { return (\n\t\t\t<div className=\"book-cover\" style={book.coverUrl ? style(book.coverUrl) : style(Default)} alt=\"book cover\"></div>\n\t\t)}\n\n\t}\n\n/* \n    function checkThumbnailExists(book) {\n\t\tif (book.coverUrl) { return (\n\t\t<div className=\"book-cover\" key={book.coverUrl} style={style(book.coverUrl)} alt=\"book cover\">\n\t\t{eBookReader(book)}\n\t\t</div>)} \n\t\telse {return (\n\t\t<div className=\"book-cover\" style={style(Default)} alt=\"book cover\">\n\t\t{eBookReader(book)}\n\t\t</div>)}\n\t}\n */\n\n\treturn (\n        <div key={book._id}  className=\"book\">\n\t        <div className=\"book-top\">\n\t              { coverFlip(book) }\n\t            <div className=\"book-shelf-changer\">\n\t                <select className=\"book-shelf-changer-select\" onChange={(event) => action(props.bsType, event.target.value, {shelfFrom: props.shelf, shelfTo: event.target.value, bookId: book._id}).then(res => res.status === true ? updateUser() : console.log(\"the mover says: \", res))}>\n\t\t\t\t\t<option selected disabled label=\"Move to:\"></option>\n\t                  {shelves.map(shelf => <option value={shelf._id}>{shelf.name}</option>)}\n\t\t\t\t\t<optgroup label=\"--------\"></optgroup>\n\t                  <option value=\"delete\" >Delete</option>\n\t\t\t\t\t  {(props.bsType === \"private\") && <option value=\"edit\">Edit</option>}\n\t                </select>\n\t            </div>\n\t        </div>\n\t        <div className=\"book-title\" key={book.title}>{book.title}</div>\n        </div>\n\t); \n};\n\nexport default BookEbook;\n","import React, { useEffect, useState } from 'react';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport {createEbook} from \"../../services/ebook.services\"\nimport '../../components/Book/BookEbook'\n\n\nfunction CreateEbook(props) {\n\t//form needs  { title, author, coverUrl, ebookUrl, owner, shelfId}\n\tconst user = props.user\n\tconst shelf = user.privateBookshelf.shelves.find(shelf => shelf.name === \"Main shelf\")\n\n\tconst initialState = {\n\t\ttitle: \"\",\n\t\tauthor: \"\",\n\t\tcoverUrl: \"\",\n        ebookUrl: \"\", \n\t\towner: user._id,\n\t\tshelf: shelf._id\n\t};\n\n\tconst [formData, setFormData] = useState(initialState);\n\tconsole.log(\"test: \", formData)\n\n\t//COVER IMAGE WIDGET\n\tfunction getCoverUrl(result) {\n\t\tif(result.event === \"success\") {\n\t\t\tsetFormData({...formData, coverUrl: result.info.secure_url})\n\t\t}\n\t}\n\n\tfunction widgetCover(event){ \n\n\t\twindow.cloudinary.createUploadWidget({ \n\t\tcloudName: \"best-reads\", \n\t\tuploadPreset: \"bestReads-bookCovers\",\n\t\tcropping: true\n\t\t}, (error, result) => {getCoverUrl(result)}).open()\n\t}\n\n\n\n\t//EBOOK FILE WIDGET\n\tfunction getEbookUrl(result) {\n\t\tif(result.event === \"success\") {\n\t\t\tsetFormData({...formData, ebookUrl: result.info.secure_url})\n\t\t}\n\t}\n\n \tfunction widgetEbooks(event) {\n\t\twindow.cloudinary.createUploadWidget({ \n\t\t\t cloudName: \"best-reads\", \n\t\t\t uploadPreset: \"bestReads-ebooks\" \n\t\t}, (error, result) => {getEbookUrl(result)}).open()\n\n\t}\n\n\n\n\n\tfunction notify(status, message) {\n\t\tif(status === \"success\") toast.warning(message, {\n\t\t\tposition: \"top-right\",\n\t\t\tautoClose: 3000,\n\t\t\thideProgressBar: true,\n\t\t\tcloseOnClick: true,\n\t\t\tpauseOnHover: true,\n\t\t\tdraggable: true,\n\t\t\tprogress: undefined,\n\t\t})\n\t\telse toast.error(message, {\n\t\t\tposition: \"top-right\",\n\t\t\tautoClose: 3000,\n\t\t\thideProgressBar: true,\n\t\t\tcloseOnClick: true,\n\t\t\tpauseOnHover: true,\n\t\t\tdraggable: true,\n\t\t\tprogress: undefined,\n\t\t})\n\t}\n\n\n\tfunction success() {\n\t\tsetFormData(initialState)\n\t\tnotify(\"success\", \"Your Ebook was added to your bookshelf!\")\n\t}\n\t\n\n\tfunction handleChange(event) {\n\t\tconst {name, value} = event.target\n        setFormData({...formData, [name]: value})\n\t}\n\n\tfunction handleSubmit(event) {\n\t\tevent.preventDefault()\n\t\tcreateEbook(formData).then(res => res.status === true ? success() : notify(\"error\", \"There was an issue creating your Ebook\") )\n\t}\n\n\n\treturn (\n\t<div className=\"searchPageMain\">\n\t\t<div className=\"searchPage\">\n\t\t\t<ToastContainer/>\n\t\t\t<h1 className=\"ebook-create-title\">Create Your Ebook </h1>\n\t\t\t<div className=\"searchFormContainer\">\n\t\t\t<form onSubmit={handleSubmit} className=\"advLoginForm createEbookForm\">\n\t\t\t\t<div className=\"inputsSearch create-ebook-form\"> \n\t\t\t\t\t<label htmlFor='input-title'>Title </label>\n\t\t\t\t\t<input type=\"text\" name=\"title\" placeholder='Your Ebook Title' onChange={handleChange} value={formData.title} required/>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"inputsSearch create-ebook-form\">\n\t\t\t\t\t<label htmlFor=\"input-author\">Author </label>\n\t\t\t\t\t<input type=\"text\" onChange={handleChange} name=\"author\" placeholder='Name' value={formData.author} />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"inputsSearch create-ebook-form\">\n\t\t\t\t\t<label htmlFor='input-cover'>Cover</label>\n\t\t\t\t\t<input type=\"button\" className=\"cloudinary-button\" onClick=\t{widgetCover} value=\"Add a cover\"/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"inputsSearch create-ebook-form\">\n\t\t\t\t\t<label htmlFor='input-ebook'>Epub file</label>\n\t\t\t\t\t<input type=\"button\" className=\"cloudinary-button\" onClick={widgetEbooks} value=\"Add an epub file\"/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"inputsSearch create-ebook-form\">\n\t\t\t\t\t<label htmlFor=\"input-bookshelf\">Add to </label>\n\t\t\t\t\t<select onChange={(event) => setFormData({...formData, shelf: event.target.value})}>\n\t                {user.privateBookshelf.shelves.map (shelf => <option name=\"shelf\" value=\t{shelf._id}>{shelf.name}</option>)}\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"inputsSearch create-ebook-form\">\n\t\t\t\t\t<button type='submit'>Submit</button>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t);\n}\n\nexport default CreateEbook;\n","export const ACCESS_TOKEN = \"access_token\";\nconst APP_NAME = \"newapp\";\nexport const CAPITALIZED_APP =\n  APP_NAME[0].toUpperCase() + APP_NAME.slice(1).toLowerCase();\n","import axios from 'axios';\nimport * as CONSTS from '../utils/consts';\n\n// here we are just maing our code look more DRY. With every backend call we must deal with errors and success states. The idea of creating these kinds of services is to make our lives easier in the components\nfunction internalServerError(err) {\n\treturn {\n\t\tstatus: false,\n\t\terrorMessage: 'Internal server error. Please check your server'\n\t};\n}\n\nfunction successStatus(res) {\n\tconsole.log(\"success: \", res)\n\treturn {\n\t\tstatus: true,\n\t\tdata: res.data\n\t};\n}\n\n// creates a basic url for every request in this file\nconst authService = axios.create({\n\tbaseURL: `${process.env.REACT_APP_SERVER_URL}/auth`\n});\n\nexport function login(credentials) {\n\treturn authService\n\t\t.post('/login', credentials)\n\t\t.then(successStatus)\n\t\t.catch(internalServerError);\n}\n\nexport function getLoggedIn() {\n\treturn authService\n\t\t.get(`/session`, {\n\t\t\theaders: {\n\t\t\t\tAuthorization: localStorage.getItem(CONSTS.ACCESS_TOKEN)\n\t\t\t}\n\t\t})\n\t\t.then(successStatus)\n\t\t.catch(internalServerError);\n}\n\n\nexport function signup(credentials) {\n\treturn authService\n\t\t.post('/signup', credentials)\n\t\t.then(successStatus)\n\t\t.catch(internalServerError);\n}\n\nexport function logout() {\n\treturn authService\n\t\t.delete('/logout', {\n\t\t\theaders: {\n\t\t\t\tAuthorization: localStorage.getItem(CONSTS.ACCESS_TOKEN)\n\t\t\t}\n\t\t})\n\t\t.then(successStatus)\n\t\t.catch(internalServerError);\n}\n\nexport function getUser() {\n\n\treturn authService.get(`/session`, {headers: {Authorization: localStorage.getItem(CONSTS.ACCESS_TOKEN)}})\n\t.then((result) => {\n\t\tif (!result.data) {\n\t\t\tconsole.log('RES IN CASE OF FAILURE', result);\n\t\t\treturn null ;\n\t\t} else {\n\t\t\treturn result.data.user\n\t\t}\n\t}).catch((err) => console.log(\"error with getuser\", err))\n}\n\n\n\n\n\n\n\n\n/* ************ BOOKSHELF, need to create new file *********/\n\nexport function displayUserPage(userId) {\n\treturn authService\n\t\t.post(`/profile/user`, userId)\n\t\t.then(successStatus)\n\t\t.catch(internalServerError);\n}","import React from 'react'\nimport { Link } from 'react-router-dom';\nimport \"../App.css\"\nimport '../utils/Forms.css'\nimport '../components/Navbar/NavbarTest.css'\n\nfunction HomePage() {\n  return (\n    // component for user profile - make sure call props\n    <div className=\"home\">\n      <div className=\"home-img-container\">\n        <img src=\"https://64.media.tumblr.com/11e061c672d56b817484963145163de9/912682de92279e4a-1a/s640x960/24725567374df17623ffe72b92965a9a711bd229.gifv\" alt=\"\" className=\"img-home\"/>\n        \n        <div className=\"home-headings\">\n          <Link to={'/search'} className=\"tag center\">A NOVEL IDEA</Link>\n          <p className=\"quote center\">\"At least we're not Amazon\"</p>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default HomePage;\n","import React, { useState } from 'react';\nimport { signup } from '../../services/auth';\nimport './auth.css';\nimport * as CONSTS from '../../utils/consts';\nimport * as PATHS from '../../utils/paths';\nimport HomePage from '../Home.page';\nimport '../../utils/Forms.css'\nimport { Link } from 'react-router-dom';\n\n\nfunction Signup(props) {\n\t//const { authenticate } = props;\n\n\tconst initialState = {\n\t\tusername: '',\n\t\temail: '',\n\t\tpassword: '',\n\t\timageUrl: \"\"\n\t};\n\n\tconst [formData, setFormData] = useState(initialState);\n\n\tconst handleChange = (event) => {\n\t\tconst { name, value } = event.target;\n\t\tsetFormData({\n\t\t\t...formData,\n\t\t\t[name]: value\n\t\t});\n\t};\n\n\n\tconst handleSubmit = (event) => {\n\t\tevent.preventDefault();\n\n\t\tsignup(formData).then((res) => {\n\t\t\t// successful signup\n\t\t\tif (!res.data) {\n\t\t\t\tconsole.log('error');\n\t\t\t}\n\t\t\telse {\n\t\t\tlocalStorage.setItem(CONSTS.ACCESS_TOKEN, res.data.accessToken);\n\t\t\tprops.authenticate(res.data.user);\n\t\t\tprops.history.push(PATHS.HOMEPAGE);\n\t\t\t}\n\t\t});\n\n\t};\n\n\treturn (\n\t\t<div className=\"page-container\">\n\t\t\t<HomePage />\n\t\t\t<div className=\"signup-form-container\">\n\t\t\t\t<h1>Sign Up</h1>\n\t\t\t\t<p className=\"account\">Account? <Link to=\"/auth/login\" className=\"account\">Log In</Link></p>\n\t\t\t\t<form onSubmit={handleSubmit} className=\"login-form\">\n\t\t\t\t\t<div className=\"inputs\">\n\t\t\t\t\t\t<label htmlFor='login-form-text'>Username</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\tname='username'\n\t\t\t\t\t\t\tplaceholder='Username'\n\t\t\t\t\t\t\tvalue={formData.username}\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"inputs\">\n\t\t\t\t\t\t<label htmlFor='login-form-text'>Email</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\tname='email'\n\t\t\t\t\t\t\tplaceholder='Email'\n\t\t\t\t\t\t\tvalue={formData.email}\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"inputs\">\n\t\t\t\t\t\t<label htmlFor='login-form-text'>Password</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\t\tname='password'\n\t\t\t\t\t\t\tplaceholder='Password'\n\t\t\t\t\t\t\tvalue={formData.password}\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\tminLength='8'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"inputs\">\n\t\t\t\t\t\t<button className='button__submit' type='submit'>Submit</button>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default Signup;\n","export const HOMEPAGE = \"/\";\nexport const SIGNUPPAGE = \"/auth/signup\";\nexport const LOGINPAGE = \"/auth/login\";\nexport const PROTECTEDPAGE = \"/protected\";\n","import React, { useState } from 'react';\nimport { login } from '../../services/auth';\nimport './Signup';\nimport * as CONSTS from '../../utils/consts';\nimport HomePage from '../Home.page';\nimport '../../utils/Forms.css'\nimport { Link } from 'react-router-dom';\n\n\nfunction LogIn(props) {\n\tconst { authenticate } = props;\n\tif(props.user && props.user._id) { props.history.push(\"/\")} \n\n\tconst initialState = {\n\t\tusername: '',\n\t\tpassword: ''\n\t};\n\n\tconst [formData, setFormData] = useState(initialState);\n\n\tconst handleChange = (event) => {\n\t\tconst { name, value } = event.target;\n\t\tsetFormData({\n\t\t\t...formData,\n\t\t\t[name]: value\n\t\t});\n\t};\n\n\tconst handleSubmit = (event) => {\n\t\tevent.preventDefault();\n\n\t\tconst credentials = {\n\t\t\tusername: formData.username,\n\t\t\tpassword: formData.password\n\t\t};\n\n\t\tlogin(credentials).then((res) => {\n\t\t\tif (!res.data) {\n\t\t\t\tconsole.log('error', res);\n\t\t\t} else {\n\t\t\tlocalStorage.setItem(CONSTS.ACCESS_TOKEN, res.data.accessToken);\n\t\t\tauthenticate(res.data.user);\n\t\t\tprops.history.push('/');\n\t\t\t}\n\t\t});\n\t};\n\n\treturn (\n\t\t<div className=\"page-container\">\n\t\t\t<HomePage />\n\t\t\t<div className=\"login-form-container\">\n\t\t\t\t<h1>Log In</h1>\n\t\t\t\t<p className=\"account\">No account? <Link to=\"/auth/signup\" className=\"account\">Sign Up</Link></p>\n\t\t\t\t<form onSubmit={handleSubmit} className=\"login-form\">\n\t\t\t\t\t<div className=\"inputs\">\n\t\t\t\t\t\t<label htmlFor='login-form-text'>Username</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\tname='username'\n\t\t\t\t\t\tplaceholder='Username'\n\t\t\t\t\t\tvalue={formData.username}\n\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\trequired\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"inputs\">\n\t\t\t\t\t\t<label htmlFor='login-form-text'>Password</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\t\tname='password'\n\t\t\t\t\t\t\tplaceholder='Password'\n\t\t\t\t\t\t\tvalue={formData.password}\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\tminLength='8'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"inputs\">\n\t\t\t\t\t\t<button className='login-form-text' type='submit'>Submit</button>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default LogIn;\n","import axios from 'axios';\nlet URI = require('urijs');\nlet URITemplate = require('urijs/src/URITemplate');\n\n\n\nexport const main = new URITemplate(`https://openlibrary.org/search.json{?q*}&limit=50`)\nexport const subSearch = new URITemplate(`https://openlibrary.org/search/{subSearch}.json{?q*}`)\n//works for authors and subjects\n\n\n\nconst urlbase = axios.create({\n    baseURL: `https://openlibrary.org`,\n})\n\n\nfunction buildUrl(searchOptions) {\n\n    let searchUrl = main.expand({\n        q: {...searchOptions}\n    })\n    console.log(\"url is:\", searchUrl)\n    return searchUrl\n}\n\n\nfunction internalServerError(err) {\n\treturn {\n\t\tstatus: false,\n\t\terrorMessage: 'Error while querying the API. Please check your server'\n\t};\n}\n\nfunction successStatus(res) {\n\treturn {\n\t\t//status: true,\n\t\tdata: res.data\n\t};\n}\n\n\nexport function mainSearch(search) {\n    const asArray = Object.entries(search);\n    const notEmpty = asArray.filter(([key, value]) => value !== \"\");\n    const backToObj = Object.fromEntries(notEmpty);\n\n    return axios.get(buildUrl(backToObj))\n    .then(successStatus)\n    .catch(internalServerError)\n\n}\n\nexport function searchOneWork(bookID) {\n\n    return axios.get(`https://openlibrary.org/search.json?q=${bookID}&limit=50`)\n    .then(successStatus)\n    .catch(internalServerError)\n\n}\n\nexport function getAuthorDetails(key) {\n    const url = `${key}.json`\n\n    return urlbase.get(url)\n    .then(successStatus)\n    .catch(internalServerError)\n}\n\n\n\nexport function getWorks(key) {\n    const url = `${key}/works.json`\n\n    return urlbase.get(url)\n    .then(successStatus)\n    .catch(internalServerError)\n}\n\n\nexport function getOneBook(olid) {\n    const url = `https://openlibrary.org/works/${olid}.json`\n\n    return axios.get(url)\n    .then(successStatus)\n    .catch(err => console.log(\"Error getting a book from: \", url, \" ---Error: \", err))\n\n}\n","import React, { useState, useEffect } from 'react';\nimport { saveToPublic } from \"../../services/shelves.services\"\n\nexport default function DropdownButton (props) {\n    const {user} = props\n    const {book} = props\n    const {search} = props\n    const {type} = props\n\n    const shelves = user.publicBookshelf.shelves\n\n\n/*     function moveShelf() {\n\n        return(\n            <div className=\"book-shelf-changer\">\n            <select onChange={(event) => action(props.bsType, event.target.value, {shelfFrom: props.shelf, shelfTo: event.target.value, bookId: book._id}).then(res => res.status === true ? updateUser() : console.log(res))}>\n            \n            <optgroup label=\"Move to:\"></optgroup>\n                {shelves.map(shelf => <option value={shelf._id}>{shelf.name}</option>)}\n            \n            <optgroup label=\"--------\"></optgroup>\n            <option value=\"delete\" >Delete</option>\n            \n            {(props.bsType === \"private\") && <option value=\"edit\">Edit</option>}\n            </select>\n            </div>\n\n        )\n    }\n */\n    function saveTo() {\n\n        return(\n            <select onChange={(event) => saveToPublic(event.target.value, book)}>\n            <option selected disabled>Save to: </option>\n            {shelves.map(shelf => <option value={shelf._id}>{shelf.name}</option>)}\n            </select>\n        )\n\n    }\n\n\n\n    return (\n        <div className=\"book-shelf-changer\">\n\t        <select onChange={(event) => saveToPublic(event.target.value, book)}>\n\t            <option selected disabled>Save to: </option>\n\t            {shelves.map(shelf => <option value={shelf._id}>{shelf.name}</option>)}\n\t            </select>\n\t    </div>\n    )\n}","import { Link } from \"react-router-dom\"\nimport Default from \"../../images/default.jpeg\"\nimport DropdownButton from \"../../components/DropdownButton/DropdownButton\"\n\nexport default function SearchResults(props) {\n\n    const {results} = props\n    console.log(\"props: \", results)\n\n\tconst {user} = props\n    const shelves = user.publicBookshelf.shelves\n\tconsole.log('these are the results', results)\n\tconsole.log(\"user from search results: \", props.user)\n\n\tfunction style(cover) {\n\t\treturn {\n\t\tbackgroundImage: `url(${cover})`,\n\t\tbackgroundRepeat: \"no-repeat\",\n\t\tbackgroundPosition: \"center\",\n\t\tbackgroundSize: \"cover\"\n\t\t}\n\t}\n\n\n\n\tfunction flippityFlop(book) {\n\t\treturn(\n\t\t\t<div className=\"flip-card\">\n\t\t\t\t<div className=\"flip-card-inner\">\n\t  \t\t\t\t<div className=\"book-cover flip-card-front\" key={book.coverUrl} style={book.coverUrl ? style(book.coverUrl) : style(Default)} \t\talt=\"book cover\"></div>\n\t  \t\t\t\t<div className=\"flip-card-back\">\n\t\t\t\t\t  <Link to={{pathname: `/details/${book._id}`, query:{book: book, user: user}}} className=\"link-tag\" style={{position: \"absolute\", top: 0, right: 0, bottom: 0, left: 0, width: \"100%\", height: \"100%\"}}></Link>\n\t  \t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t)}\n\n\n    function checkThumbnailExists(book) {\n\t\tif (book.coverUrl) {\n\t\t\treturn (\n\t\t\t\t<div className=\"book-cover\" key={book.coverUrl} style={style(book.coverUrl)} alt=\"book cover\"></div>\n\t\t\t)\n\t\t} else {\n            return ( \n\t\t\t\t<div className=\"book-cover\" style={style(Default)} alt=\"book cover\"></div>\n            )\n        }\n\t}\n \n\n    return(\n        <div className=\"bookshelf\">\n\t        <div className=\"bookshelf-books\">\n\t            <ol className=\"books-grid\">\n                    {results.map(eachDoc => \n                        <div key={eachDoc._id} className=\"book\">\n\t                        <div className=\"book-top\">\n\t                        { flippityFlop(eachDoc) }\n\t\t\t\t\t\t\t<DropdownButton book={eachDoc} user={user} search={true} type={\"book\"} />\n\t                        </div>\n\t                        <div className=\"book-title\" key={eachDoc.title}>{eachDoc.title}</div>\n\t                        <div className=\"book-author\" key={eachDoc.author}>{eachDoc.author}</div>\n                        </div>\n                    )}\n                </ol>\n\t        </div>\n\t    </div>\n\n    )\n\n}","import React from \"react\";\nimport \"./Loading.css\";\n\nconst LoadingComponent = () => {\n  return (\n    <div className=\"wrapper\">\n      <div className=\"spinner\">\n        <div className=\"bounce1\"></div>\n        <div className=\"bounce2\"></div>\n        <div className=\"bounce3\"></div>\n      </div>\n    </div>\n  );\n};\n\nexport default LoadingComponent;\n","import * as apiSearches from \"../../services/api.services\"\nimport { useEffect, useState } from 'react';\nimport SearchResults from \"./SearchResults.page\";\nimport Loading from \"../../components/Loading/index\"\n\n\nfunction Search(props) {\n\n    const emptySearch = {q:\"\", title:\"\", author:\"\", subject:\"\", place:\"\", person:\"\", language:\"\", publisher:\"\"}\n    const [searchState, setSearch] = useState(emptySearch)\n    const [toggle, setToggle] = useState(false)\n    const [loading, setLoading] = useState(false)\n\n    const [results, setResults] = useState([])\n    console.log(\"user from main search: \", props.user)\n\n    function handleChange(event) {\n        const {name, value} = event.target\n        setSearch({...searchState, [name]: value})\n    }\n\n\n\n    function filter(resultsFromApi) {\n      return resultsFromApi.map((eachWork) => {\n      let result = {\n          author: eachWork.author_name,\n          title: eachWork.title,\n          _id: eachWork.key.replace(\"/works/\", \"\"),\n          olLink: `https://openlibrary.org${eachWork.key}`\n      }\n\n      if (eachWork.cover_edition_key) result.coverUrl = `https://covers.openlibrary.org/b/olid/${eachWork.cover_edition_key}-M.jpg`;\n\n      return result \n\n      }) \n    }\n\n\n    function handleSubmit(event) {\n        console.log(\"test\")\n        event.preventDefault()\n        setLoading(true)\n        apiSearches.mainSearch(searchState)\n        .then(res => {setResults(filter(res.data.docs)) ; setLoading(false)})\n        .catch(err => console.log(err))\n    }\n\n    //useEffect(() => console.log(\"results: \", results), [results])\n\n\n  return (\n\n    <div className=\"searchPageMain\">\n      <div className=\"searchPage\">\n\n        <form onSubmit={handleSubmit} className=\"searchForm\">\n            <label for=\"searchbar-label\"></label>\n            <input className=\"searchbarInput\" type=\"search\" pattern=\".*\\S.*\" required onChange={handleChange}  name=\"q\" value={searchState.q} />\n            <span className=\"caret\"></span>\n        </form> \n\n\n\n\n\n{/*         <form onSubmit={handleSubmit} className=\"searchForm\">\n          <div className=\"inputsSearch\">\n            <label htmlFor=\"main\"></label>\n            <input type=\"text\" onChange={handleChange} name=\"q\" value=    {searchState.q} placeholder=\"Search books, authors or themes\" />\n          </div>\n          <div className=\"inputsSearch\">\n            <button type=\"submit\">Search</button>\n          </div>\n        </form> */}\n\n\n        <div className=\"searchFormContainer\">\n          \n          <a href=\"#\" onClick={e => setToggle(!toggle)} > Advanced search</a>\n          {(toggle) && \n          <div>\n            \n            <form onSubmit={e => {handleSubmit(e) ; setToggle(!toggle)}} className=\"advLoginForm\">\n\n              <div className=\"inputsSearch\"> \n                <label htmlFor=\"title\">Title </label>\n                <input type=\"text\" onChange={handleChange} name=\"title\" value=    {searchState.title} />\n              </div>\n\n              <div className=\"inputsSearch\">\n                <label htmlFor=\"title\">Author </label>\n                <input type=\"text\" onChange={handleChange} name=\"author\"  value=  {searchState.author} />\n              </div>\n\n              <div className=\"inputsSearch\">\n                <label htmlFor=\"title\">Subject </label>\n                <input type=\"text\" onChange={handleChange} name=\"subject\"   value=  {searchState.subject} />\n              </div>\n\n              <div className=\"inputsSearch\">\n                <label htmlFor=\"title\">Place </label>\n                <input type=\"text\" onChange={handleChange} name=\"place\" value=    {searchState.place} />\n              </div>\n\n              <div className=\"inputsSearch\">\n                <label htmlFor=\"title\">Person </label>\n                <input type=\"text\" onChange={handleChange} name=\"person\"  value=  {searchState.person} />\n              </div>\n\n              <div className=\"inputsSearch\">\n                <label htmlFor=\"title\">Language </label>\n                <input type=\"text\" onChange={handleChange} name=\"language\"  value=  {searchState.language} />\n              </div>\n\n              <div className=\"inputsSearch\">\n                <label htmlFor=\"title\">Publisher </label>\n                <input type=\"text\" onChange={handleChange} name=\"publisher\"   value=  {searchState.publisher} />\n              </div>\n\n              <div className=\"inputsSearch\">\n                <button type=\"submit\">Search</button>\n              </div>\n            </form>\n          </div> \n        }\n\n{/*         {(results && results.length > 1) && \n          <SearchResults results={results} user={props.user}/>\n        }\n */}  \n          {loading ? <Loading /> : <SearchResults results={results} user= {props.user}/> }\n\n        </div>\n\n      </div>\n    </div>\n\n  );\n}\n\nexport default Search;\n\n\n","import React from \"react\";\nimport { Route } from \"react-router-dom\";\n\n// this kind of component is a `wrapper` around the React router dom Route where we immediately pass every single prop down. Instead of writing things with the render\nconst NormalRoute = ({ exact, to, path, component, ...componentProps }) => {\n  const Component = component;\n  return (\n    <Route\n      exact={exact}\n      path={path || to}\n      render={(props) => <Component {...componentProps} {...props} />}\n    />\n  );\n};\n\nexport default NormalRoute;\n","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\n\n// the protected route component must take a user in order to check if the user is authenticated or not. If not moves the user to the login page\nconst ProtectedRoute = ({\n\tuser,\n\texact,\n\tto,\n\tpath,\n\tcomponent,\n\t...componentProps\n}) => {\n\tconst Component = component;\n\tif (!user) {\n\t\treturn <Redirect to={'/auth/login'} />;\n\t}\n\treturn (\n\t\t<Route\n\t\t\texact={exact}\n\t\t\tpath={path || to}\n\t\t\trender={(props) => (\n\t\t\t\t<Component {...componentProps} {...props} user={user} />\n\t\t\t)}\n\t\t/>\n\t);\n};\n\nexport default ProtectedRoute;\n","import React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport {getOneBook} from \"../services/api.services\"\n\nfunction Test(props) {\n\n    const [state, setState] = useState(\"\")\n    const [result, setResult] = useState({})\n\n    function handleChange(event) {\n        setState(event.target.value)\n\n    }\n\n    function handleSubmit(event) {\n        event.preventDefault()\n        getOneBook(state).then(res => setResult(res)).catch(err => console.log(err))\n    }\n\n\n    return (\n<div className='container'>\n  <div className='center list flex-column'>\n    <div className='card flex-row open'>\n      <img src='http://i.harperapps.com/covers/9780008108298/y450-293.jpg' className='book'/>\n      <div className='flex-column info'>\n        <div className='title'>The Fellowship of the Ring</div>\n        <div className='author'>J.R.R. Tolkien</div>\n        <div className='hidden bottom summary'>\n          Lorem, ipsum dolor sit amet consectetur adipisicing elit. Quod ratione impedit temporibus maiores autem aperiam assumenda exercitationem, quisquam nobis esse.\n        </div>\n      </div>\n      <div className='flex-column group'>\n        <div className='members'>\n          <span className='current'>14</span> /\n          <span className='max'>30</span>\n        </div>\n        <div className='hidden bottom'>\n          <button className='simple'>Join</button>\n        </div>\n      </div>\n    </div>\n    <div className='card flex-row'>\n      <img src='https://i.pinimg.com/originals/52/ec/12/52ec12f7dd324864949267c92cce2e43.jpg' className='book'/>\n      <div className='flex-column info'>\n        <div className='title'>1984</div>\n        <div className='author'>George Orwell</div>\n        <div className='hidden bottom summary'>\n          Lorem, ipsum dolor sit amet consectetur adipisicing elit. Quod ratione impedit temporibus maiores autem aperiam assumenda exercitationem, quisquam nobis esse.\n        </div>\n      </div>\n      <div className='flex-column group'>\n        <div className='members'>\n          <span className='current'>14</span> /\n          <span className='max'>30</span>\n        </div>\n        <div className='hidden bottom'>\n          <button className='simple'>Join</button>\n        </div>\n      </div>\n    </div>\n    <div className='card flex-row'>\n      <img src='https://images-na.ssl-images-amazon.com/images/I/51N5qVjuKAL._SX309_BO1,204,203,200_.jpg' className='book'/>\n      <div className='flex-column info'>\n        <div className='title'>To Kill a Mockingbird</div>\n        <div className='author'>Harper Lee</div>\n        <div className='hidden bottom summary'>\n          Lorem, ipsum dolor sit amet consectetur adipisicing elit. Quod ratione impedit temporibus maiores autem aperiam assumenda exercitationem, quisquam nobis esse.\n        </div>\n      </div>\n      <div className='flex-column group'>\n        <div className='members'>\n          <span className='current'>14</span> /\n          <span className='max'>30</span>\n        </div>\n        <div className='hidden bottom'>\n          <button className='simple'>Join</button>\n        </div>\n      </div>\n    </div>\n    <div className='card flex-row'>\n      <img src='https://upload.wikimedia.org/wikipedia/en/thumb/f/f7/TheGreatGatsby_1925jacket.jpeg/220px-TheGreatGatsby_1925jacket.jpeg' className='book'/>\n      <div className='flex-column info'>\n        <div className='title'>Great Gatsby</div>\n        <div className='author'>F Scott Fitzgerald</div>\n        <div className='hidden bottom summary'>\n          Lorem, ipsum dolor sit amet consectetur adipisicing elit. Quod ratione impedit temporibus maiores autem aperiam assumenda exercitationem, quisquam nobis esse.\n        </div>\n      </div>\n      <div className='flex-column group'>\n        <div className='members'>\n          <span className='current'>14</span> /\n          <span className='max'>30</span>\n        </div>\n        <div className='hidden bottom'>\n          <button className='simple'>Join</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n    )\n}\n\nexport default Test","import { useState, useEffect } from \"react\";\nimport {\n    EpubView, // Underlaying epub-canvas (wrapper for epub.js iframe)\n    EpubViewStyle, // Styles for EpubView, you can pass it to the instance as a style prop for customize it\n    ReactReader, // A simple epub-reader with left/right button and chapter navigation\n    ReactReaderStyle // Styles for the epub-reader it you need to customize it\n  } from \"react-reader\";\nimport { getEbookDetails } from \"../../services/ebook.services\";\n\n\n\nfunction Reader(props){\n\n    const {ebookId} = props.match.params\n    console.log(\"eBookId\", ebookId)\n\n    const [ebook, setEbook] = useState(\"\")\n\n    useEffect(() => {getEbookDetails(ebookId).then(res => {\n        console.log(res.data);\n        setEbook(res.data)\n    })}, [])\n\n\n    return (\n        \n        <div style={{height: \"100vh\" }}>\n            <div style={{ position: \"relative\", height: \"100%\" }}>\n              {\" \"}\n              <ReactReader\n                url={ebook.ebookUrl}\n                title={ebook.title}\n                location={\"epubcfi(/6/2[cover]!/6)\"}\n                locationChanged={epubcifi => console.log(epubcifi)}\n              />\n            </div>\n        </div>\n    );\n    \n}\n\nexport default Reader","import axios from 'axios';\n\n\n\n\nfunction internalServerError(err) {\n\treturn {\n\t\tstatus: false,\n\t\terrorMessage: 'Internal server error. Please check your server'\n\t};\n}\n\nfunction successStatus(res) {\n\treturn {\n\t\tstatus: true,\n\t\tdata: res.data\n\t};\n}\n\nconst service = axios.create({\n\tbaseURL: `${process.env.REACT_APP_SERVER_URL}/reviews`\n});\n\n\nexport function createReview(form) {\n\tconst {bookId, owner, comment, rating} = form\n\n    return service.post(`/${bookId}/new-review`, {owner, comment, rating})\n    .then(successStatus)\n    .catch(internalServerError)\n\n}\n\n\nexport function allReviews(bookId) {\n\n    return service.get(`/${bookId}/reviews`)\n    .then(successStatus)\n    .catch(internalServerError)\n\n}","import React, { useEffect, useState } from 'react'\nimport { Link } from 'react-router-dom'\nimport { getUser } from '../../services/auth'\nimport {createReview} from '../../services/review.services'\nimport \"./Review.css\"\n\n//const [userState, setUser] = useState({})\n//\tuseEffect(() => {getUser().then(result => setUser(result))}, [])\n// useEffect(() => {setFormState({...formState, owner: userState._id}) ; console.log(\"userState from review: \", userState)}, [userState])\n// CREATE NEW REVIEW\n\nfunction NewReview(props) {\n\tconst {user, bookId} = props\n\n\tconst initialFormState = {\n\t\towner: user && user._id,\n\t\tcomment: \"\",\n\t\tbookId: bookId,\n\t\trating: null\n\t};\n\n\n\n\tconst [formState, setFormState] = useState(initialFormState);\n\n\n\n\tfunction handleChange(event) {\n        const {name, value} = event.target;\n        setFormState({...formState, [name]: value})\n\n\t}\n\n\tfunction handleSubmit(event) {\n\t\tevent.preventDefault()\n\t\treturn createReview(formState)\n\t\t.then(review => console.log(\"review submitted: \", review))\n\t\t.catch(err => console.log(err))\n\n\t}\n\n\n\tfunction ratingSelect(event) {\n\t\tsetFormState({...formState, rating: event.target.value})\n\t}\n\n\n\t//useEffect(() => {console.log(\"form: \", formState)}, [userState])\n\n\n\t//console.log(\"user: \", props.user ? props.user._id : \"nope\")\n\t//{setFormState({...formState, owner: props.user._id})}\n\n\treturn (\n\n\t\t<div>\n\t\t\t<form onSubmit={handleSubmit} className=\"row\">\n\t\t\t\t<div id=\"like\" className=\"rating\">\n\t\t\t\n\t\t\t\t\t\t  <input onClick={ratingSelect} type=\"radio\" id=\"heart_5\" name=\"like\" value=\"5\" />\n\t\t\t\t\t\t  <label for=\"heart_5\" title=\"Five\">&#10084;</label>\n\t\t\t\n\t\t\t\t\t\t  <input onClick={ratingSelect} type=\"radio\" id=\"heart_4\" name=\"like\" value=\"4\" />\n\t\t\t\t\t\t  <label for=\"heart_4\" title=\"Four\">&#10084;</label>\n\t\t\t\n\t\t\t\t\t\t  <input onClick={ratingSelect} type=\"radio\" id=\"heart_3\" name=\"like\" value=\"3\" />\n\t\t\t\t\t\t  <label for=\"heart_3\" title=\"Three\">&#10084;</label>\n\t\t\t\n\t\t\t\t\t\t  <input onClick={ratingSelect} type=\"radio\" id=\"heart_2\" name=\"like\" value=\"2\" />\n\t\t\t\t\t\t  <label for=\"heart_2\" title=\"Two\">&#10084;</label>\n\t\t\t\n\t\t\t\t\t\t  <input onClick={ratingSelect} type=\"radio\" id=\"heart_1\" name=\"like\" value=\"1\" />\n\t\t\t\t\t\t  <label for=\"heart_1\" title=\"One\">&#10084;</label>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"review-section\">\n\t\t\t\t\t<h3>Review this book </h3>\n \t\t\t\t\t<textarea value={formState.comment} name=\"comment\" onChange={handleChange} required className=\"form-control\" cols=\"32\" rows=\"6\" placeholder=\"What did you think?\"></textarea>\n\t\t\t\t\t<button type=\"submit\">Review</button>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</div>\n\t)\n\n\n\n\t\n/* \treturn (\n\t\t<div  className=\"review-div\">\n\t\t\t<h3>Book review: </h3>\n\t\t\t<div className=\"container p-3\">\n  \t\t\t\t<form onSubmit={handleSubmit} className=\"row\">\n \n      \t\t\t\t<div className=\"stars text-reviewCenter\">\n      \t\t\t\t\t<div className=\"col-md-12\">\n          \t\t\t\t\t<div className=\"form-group\">\n \n            \t\t\t\t\t<input onClick={ratingSelect} type=\"radio\" id=\"five\" name=\"rate\" value=\"5\"/>\n            \t\t\t\t\t<label htmlFor=\"five\"></label>\n            \t\t\t\t\t<input onClick={ratingSelect} type=\"radio\" id=\"four\" name=\"rate\" value=\"4\" />\n            \t\t\t\t\t<label htmlFor=\"four\"></label>\n            \t\t\t\t\t<input onClick={ratingSelect} type=\"radio\" id=\"three\" name=\"rate\" value=\"3\"/>\n            \t\t\t\t\t<label htmlFor=\"three\"></label>\n            \t\t\t\t\t<input onClick={ratingSelect} type=\"radio\" id=\"two\" name=\"rate\" value=\"2\"/>\n            \t\t\t\t\t<label htmlFor=\"two\"></label>\n            \t\t\t\t\t<input onClick={ratingSelect} type=\"radio\" id=\"one\" name=\"rate\" value=\"1\" />\n            \t\t\t\t\t<label htmlFor=\"one\"></label>\n \n            \t\t\t\t\t<span className=\"result\"></span>\n \n          \t\t\t\t\t</div>\n        \t\t\t\t</div>\n      \t\t\t\t</div>\n      \t\t\t\t<div className=\"col-md-6\">\n        \t\t\t\t<div className=\"form-group\">\n          \t\t\t\t\t<label htmlFor=\"textarea\"><b>Review:</b></label>\n \n          \t\t\t\t\t<textarea value={formState.comment} name=\"comment\" onChange={handleChange} required className=\"form-control\" id=\"textarea\" rows=\"4\" placeholder=\"What did you think of this book?\"></textarea>\n        \t\t\t\t</div>\n      \t\t\t\t</div>\n      \t\t\t\t<div className=\"col-md-12 text-right\">\n        \t\t\t\t<button type=\"submit\" className=\"btn btn-primary\">Review</button>\n      \t\t\t\t</div>\n  \t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t); */\n} \n\nexport default NewReview;","import React, {useEffect, useState} from 'react';\nimport {Link} from 'react-router-dom'\nimport NewReview from '../../components/Reviews/NewReview';\nimport {mainSearch, searchOneWork} from '../../services/api.services'\nimport {allReviews} from '../../services/review.services'\nimport './BookDetails.css'\nconst baseURL = `https://openlibrary.org`;\n\n\nfunction BookDetails(props){\n\n    const {bookId} = props.match.params\n    const {user} = props\n    const [bookState, setBookState] = useState({})\n    const [reviewsState, setReviews] = useState([])\n\n\n\n\n    function filter(book) {\n      let result = {\n          author: book.author_name,\n          title: book.title,\n          _id: book.key.replace(\"/works/\", \"\"),\n          olLink: `https://openlibrary.org${book.key}`\n      }\n\n      if (book.cover_edition_key) result.coverUrl = `https://covers.openlibrary.org/b/olid/${book.cover_edition_key}-L.jpg`;\n\n      //console.log(\"result: \", result)\n      return result \n\n    }\n\n    useEffect(() => {\n        searchOneWork(bookId).then(res => setBookState(filter(res.data.docs[0])));\n        allReviews(bookId).then(res => setReviews(res.data))\n    }, [bookId])\n\n    return (\n        <div className=\"details-page-container\">\n            <div className=\"details-main\">\n                <h2>{bookState.title}</h2>\n                <img src={bookState.coverUrl} alt=\"\" />\n                <a href={bookState.olLink} target=\"blank\" >See Open Library page</a>\n                <NewReview user={user} bookId={bookId} />\n            </div>\n            <div className=\"details-reviews\">\n                {reviewsState.map(eachReview => {\n                    return(\n                    <div className=\"review-comments\">\n                        <h6>{eachReview.rating} &#10084;</h6>\n                        <p>\"{eachReview.comment}\"</p>\n                    </div>\n                    )\n                })}\n            </div>\n        </div>\n\n        )\n};\n\nexport default BookDetails;","import React, { useEffect, useState } from 'react'\nimport * as CONSTS from '../../utils/consts';\nimport { getLoggedIn, logout } from '../../services/auth';\nimport { Link } from 'react-router-dom'\nimport CreatePrivateShelf from '../../components/PrivateShelves/NewDynamicShelf'\nimport BookEbook from '../../components/Book/BookEbook'\nimport { movePrivate } from '../../services/shelves.services'\n\n\nfunction PrivateBookShelf(props){\n    const {user, setUser} = props;\n    \n    const initalState = {username: '', publicBookshelf: {}, privateBookshelf: {}, reviews: []}\n\n    /* const username = user.username\n    const publicBookshelf = user.publicBookshelf\n    const privateBookshelf = user.privateBookshelf\n    const reviews = user.reviews */\n    const [username, setUsername] = useState(user.username)\n    const [privateBookshelf, setPrivateBookshelf] = useState(user.privateBookshelf)\n    const [privateShelves, setPrivateBS] = useState()\n\n    function updateUser() {\n        const accessToken = localStorage.getItem(CONSTS.ACCESS_TOKEN);\n\t\tif (!accessToken) {\n\t\t}\n\t\tgetLoggedIn(accessToken).then((res) => {\n\t\t\tif (!res.data) {\n\t\t\t\tconsole.log('RES IN CASE OF FAILURE', res);\n\t\t\t} else {\n\t\t\t\t//setUser(res.data.user)\n        setPrivateBookshelf(res.data.user.privateBookshelf)\n        setPrivateBS(res.data.user.privateBookshelf.shelves)\n\t\t\t}\n\t\t});\n    }\n    const [bookshelfState, setState] = useState(privateBookshelf)\n\n    useEffect(() => {\n        setState(privateBookshelf)\n    }, [privateBookshelf])\n\n    useEffect(() => {\n      updateUser()\n  }, [])\n\n\n\n    return (\n      <div className=\"bookshelf-main-page\">\n        <div className=\"bookshelf-name\">\n          <h1 className=\"cloud-text\">{user.username}'s private bookshelf</h1>\n        </div>\n        <div className=\"list-books-title\">\n          <div className=\"link-to-create-card\">\t\n              <div className=\"library-gif\">\n              </div>\n              <div className=\"product-details\">\n                <h1>Your own library, always with you.</h1>\n                <p>Add your own ebooks, organize your collection in personalized shelves, and read online.</p>\n\n                <div className=\"buttons-div-bs\">\n                  <Link className=\"create-ebook-button\" to=\"/ebook/create\">Add an ebook</Link>\n                  <Link className=\"create-shelf-button\">Create a new shelf</Link>\n                </div>\n              </div>\n            </div>\n          </div>\n          \n              {bookshelfState && bookshelfState.shelves && bookshelfState.shelves.length > 0 && bookshelfState.shelves.map(shelf => {\n              return(\n                <div key={shelf._id} className=\"bookshelf\">\n                <h3 className=\"cloud-title\">{shelf.name}</h3>\n\t                <div className=\"bookshelf-books\">\n\t                  <ol className=\"books-grid\">\n                      {shelf.ebooks && shelf.ebooks.map(eachBook => \n                          <BookEbook book={eachBook} user={props.user} bsType=\"private\" bookshelf={privateBookshelf} shelf={shelf._id} updateUser={updateUser} />\n                      )}\n                    </ol>\n                  </div>\n                </div>  \n              )\n            })}\n\n          </div>\n\n\n           \n    )\n};\n\nexport default PrivateBookShelf;\n","import React, {useEffect, useState} from 'react';\nimport { getLoggedIn, logout } from '../../services/auth';\nimport * as CONSTS from '../../utils/consts';\nimport BookEbook from '../../components/Book/BookEbook';\nimport \"./Bookshelves.css\"\n\n\nfunction PublicBookShelf(props){\n    const {user, setUser} = props;\n    \n    const initalState = {username: '', publicBookshelf: {}, privateBookshelf: {}, reviews: []}\n\n    const [username, setUsername] = useState(user.username)\n    const [publicBookshelf, setPublicBookshelf] = useState(user.publicBookshelf)\n    const [publicShelves, setPublicBS] = useState()\n\n    function updateUser() {\n        const accessToken = localStorage.getItem(CONSTS.ACCESS_TOKEN);\n\t\tif (!accessToken) {\n\t\t}\n\t\tgetLoggedIn(accessToken).then((res) => {\n\t\t\tif (!res.data) {\n\t\t\t\tconsole.log('RES IN CASE OF FAILURE', res);\n\t\t\t} else {\n          setPublicBookshelf(res.data.user.publicBookshelf)\n          setPublicBS(res.data.user.publicBookshelf.shelves)\n\t\t\t}\n\t\t});\n    }\n\n\n    console.log(publicBookshelf)\n\n\n    const [bookshelfState, setState] = useState(publicBookshelf)\n\n    useEffect(() => {\n        setState(publicBookshelf)\n    }, [publicBookshelf])\n\n    useEffect(() => {\n      updateUser()\n  }, [])\n\n\n\n    return (\n            <div className=\"bookshelf-main-page\">\n                            <div className=\"bookshelf-name\">\n                  <h1 className=\"cloud-text\">{user.username}'s public bookshelf</h1>\n                </div>\n                <div className=\"list-books-shelf\">\n                  {bookshelfState && bookshelfState.shelves && bookshelfState.shelves.length > 0 && bookshelfState.shelves.map(shelf => {\n              \n                  return(\n                      <div key={shelf._id} className=\"bookshelf\">\n                        <h3 className=\"cloud-title\">{shelf.name}</h3>\n\t                      <div className=\"bookshelf-books\">\n\t                  \n                          <ol className=\"books-grid\">\n                            \n                            {shelf.books && shelf.books.map(eachBook => \n                            <BookEbook book={eachBook} user={props.user} bsType=\"public\" updateUser={updateUser} bookshelf={publicBookshelf} shelf={shelf._id} />\n                            )}\n                          \n                          </ol>\n                        \n                        </div>\n                      </div>  \n                    )\n                  })}\n                </div>\n            </div>\n      )\n\n};\n\nexport default PublicBookShelf;\n\n","import React, { useState, useEffect } from 'react';\nimport { Switch } from 'react-router-dom';\nimport Navbar from './components/Navbar/Navbar';\nimport CreateEbook from './pages/ebooks/CreateEbook.page';\nimport LogIn from './pages/authPages/LogIn.page';\nimport Search from './pages/search/Search.page';\nimport Signup from './pages/authPages/Signup';\nimport NormalRoute from './routing-components/NormalRoute';\nimport ProtectedRoute from './routing-components/ProtectedRoute';\nimport { getLoggedIn, logout, getUser } from './services/auth';\nimport * as CONSTS from './utils/consts';\nimport NewDynamicShelf from './components/PrivateShelves/NewDynamicShelf'\nimport Test from './components/Test';\nimport {displayUserPage} from \"./services/auth\"\nimport Reader from './pages/ebooks/Read.page';\nimport \"./App.css\";\nimport HomePage from './pages/Home.page'\nimport BookDetails from './pages/bookDetails/BookDetails.page';\nimport NewReview from './components/Reviews/NewReview';\nimport PrivateBookShelf from \"./pages/bookshelves/PrivateBookshelf.page\"\nimport PublicBookShelf from './pages/bookshelves/PublicBookShelf.page';\nimport './utils/Forms.css'\nimport './components/Book/BookEbook.css'\n\n\n\n\nfunction App() {\n \n/*  \tlet token = localStorage.getItem(CONSTS.ACCESS_TOKEN) || null\n\tlet testUser;\n\n\tif(token) {\n\t\tgetLoggedIn(token).then((res) => {\n\t\tconsole.log(res);\n\t\tif (!res.data) {\n\t\t\tconsole.log('RES IN CASE OF FAILURE', res);\n\t\t\tsetUser(null);\n\t\t} else {\n\t\t\ttestUser = res.data.user;\n\t\t}\n\t});} \n  */\n\tconst [user, setUser] = useState(null);\n \n\n  \tuseEffect(() => {\n\t\tconst accessToken = localStorage.getItem(CONSTS.ACCESS_TOKEN);\n\t\tif (!accessToken) {\n\t\t\tsetUser(null);\n\t\t}\n\t\tgetLoggedIn(accessToken).then((res) => {\n\t\t\tif (!res.data) {\n\t\t\t\tconsole.log('RES IN CASE OF FAILURE', res);\n\t\t\t\tsetUser(null);\n\t\t\t} else {\n\t\t\t\tsetUser(res.data.user)\n\t\t\t}\n\t\t});\n\t}, []);\n   \n\tconst handleLogout = () => {\n\t\tconst accessToken = localStorage.getItem(CONSTS.ACCESS_TOKEN);\n\t\tif (!accessToken) {\n\t\t\tsetUser(null);\n\t\t}\n\t\tlogout(accessToken).then((res) => {\n\t\t\tif (!res.status) {\n\t\t\t\tconsole.error('💡 SOMETHING HAPPENED THAT HAS TO DEALT WITH', res);\n\t\t\t}\n\n\t\t\tlocalStorage.removeItem(CONSTS.ACCESS_TOKEN);\n\t\t\tsetUser(null);\n\t\t});\n\t};\n\n \tconst authenticate = (user) => {\n\t\tconsole.log(user)\n\t\tsetUser(user);\n\t};\n \n\tconsole.log(\"user from app: \", user)\n\n\n\n\treturn (\n\t\t<div className='App'>\n\t\t\t<Navbar handleLogout={handleLogout} \n\t\t\tcomponent ={Navbar}\n\t\t\tuser={user} />\n\n\t\t\t<Switch>\n\t\t\t\t<NormalRoute \n\t\t\t\t\texact\n\t\t\t\t\tpath={'/'}\n\t\t\t\t\tauthenticate={authenticate}\n\t\t\t\t\tcomponent={HomePage}\n\t\t\t\t/>\n\n\t\t\t\t<NormalRoute\n\t\t\t\t\texact\n\t\t\t\t\tpath={'/'}\n\t\t\t\t\tuser={user}\n\t\t\t\t\tauthenticate={authenticate}\n\t\t\t\t\tcomponent={HomePage}\n\t\t\t\t/>\n\t\t\t\t<NormalRoute\n\t\t\t\t\texact\n\t\t\t\t\tpath={'/auth/signup'}\n\t\t\t\t\tuser={user}\n\t\t\t\t\tauthenticate={authenticate}\n\t\t\t\t\tcomponent={Signup}\n\t\t\t\t/>\n\t\t\t\t<NormalRoute\n\t\t\t\t\texact\n\t\t\t\t\tpath={'/auth/login'}\n\t\t\t\t\tuser={user}\n\t\t\t\t\tauthenticate={authenticate}\n\t\t\t\t\tcomponent={LogIn}\n\t\t\t\t/>\n\t\t\t\t<NormalRoute\n\t\t\t\t\texact\n\t\t\t\t\tpath={'/details/:bookId'}\n\t\t\t\t\tuser={user}\n\t\t\t\t\tcomponent={BookDetails}\n\t\t\t\t/>\n\t\t\t\t<ProtectedRoute\n\t\t\t\t\texact\n\t\t\t\t\tpath={'/review/:bookId'}\n\t\t\t\t\tuser={user}\n\t\t\t\t\tcomponent={NewReview}\n\t\t\t\t/>\n\t\t\t\t<ProtectedRoute\n\t\t\t\t\texact\n\t\t\t\t\tpath={'/search'}\n\t\t\t\t\tcomponent={Search}\n\t\t\t\t\tuser={user}\n\t\t\t\t/>\n\t\t\t\t<ProtectedRoute\n\t\t\t\t\texact\n\t\t\t\t\tpath={`/user/privateBookshelf`}\n\t\t\t\t\tcomponent={PrivateBookShelf}\n\t\t\t\t\tuser={user}\n\t\t\t\t\tsetUser={setUser}\n\t\t\t\t/>\n\t\t\t\t<ProtectedRoute\n\t\t\t\t\texact\n\t\t\t\t\tpath={`/user/publicBookshelf`}\n\t\t\t\t\tcomponent={PublicBookShelf}\n\t\t\t\t\tuser={user}\n\t\t\t\t\tsetUser={setUser}\n\t\t\t\t/>\n\t\t\t\t<ProtectedRoute\n\t\t\t\t\texact\n\t\t\t\t\tpath={'/ebook/create'}\n\t\t\t\t\tcomponent={CreateEbook}\n\t\t\t\t\tuser={user}\n\t\t\t\t/>\n\t\t\t</Switch>\n\t\t</div>\n\t);\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport { BrowserRouter, Switch, Route} from \"react-router-dom\";\nimport Reader from \"./pages/ebooks/Read.page\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <Switch>\n        <Route exact path={'/reader/:ebookId'} component={Reader}/>\n        <App />\n      </Switch>\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}