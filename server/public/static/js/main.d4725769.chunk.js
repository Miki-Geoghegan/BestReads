(this["webpackJsonpnewapp-client"]=this["webpackJsonpnewapp-client"]||[]).push([[0],{140:function(e,t,c){},164:function(e,t,c){},167:function(e,t,c){},168:function(e,t,c){},282:function(e,t,c){"use strict";c.r(t);var s=c(2),n=c.n(s),a=c(55),r=c.n(a),o=(c(140),c(3)),l=c(9),i=c(5),b=c(134),j=c(135),u=(c(60),c(1)),h=function(e){e.user;var t=Object(s.useState)(!1),c=Object(o.a)(t,2),n=c[0],a=c[1],r=function(){a(!1)};return Object(u.jsxs)("nav",{className:"navBar",children:[Object(u.jsx)("div",{className:"header",children:Object(u.jsx)(i.b,{to:"/",className:"homeLogo",children:"Best Reads"})}),Object(u.jsx)("button",{onClick:function(){a((function(e){return!e}))},children:n?Object(u.jsx)(b.a,{style:{color:"#fff",width:"40px",height:"40px"}}):Object(u.jsx)(j.a,{style:{color:"#7b7b7b",width:"40px",height:"40px"}})}),Object(u.jsx)("div",{className:"nav__authLinks",children:e.user?Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("ul",{className:"menuNav ".concat(n?" showMenu":""),children:[Object(u.jsx)("li",{children:Object(u.jsx)(i.b,{to:"/",activeClassName:"homebutton",onClick:function(){return r()},children:"Home"})}),Object(u.jsx)("li",{children:Object(u.jsx)(i.b,{to:"/search",activeClassName:"active-link",onClick:function(){return r()},children:"Searchbook"})}),Object(u.jsx)("li",{children:Object(u.jsx)(i.b,{to:"/ebook/create",activeClassName:"authLink",onClick:function(){return r()},children:"Create an eBook"})}),Object(u.jsx)("li",{children:Object(u.jsx)(i.b,{to:"/auth/profile/user",activeClassName:"authLink",onClick:function(){return r()},children:"User page"})}),Object(u.jsx)("li",{children:Object(u.jsx)(i.b,{to:"/review/test",activeClassName:"authLink",onClick:function(){return r()},children:"Review"})}),Object(u.jsx)("li",{children:Object(u.jsx)(i.b,{className:"nav-logoutbtn",onClick:e.handleLogout,children:"Logout"})})]})}):Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("ul",{className:"menuNav ".concat(n?" showMenu":""),children:[Object(u.jsx)("li",{children:Object(u.jsx)(i.b,{to:"/",className:"authLink",onClick:function(){return r()},children:"Home"})}),Object(u.jsx)("li",{children:Object(u.jsx)(i.b,{to:"/auth/signup",activeClassName:"authLink",onClick:function(){return r()},children:"Signup"})}),Object(u.jsx)("li",{children:Object(u.jsx)(i.b,{to:"/auth/login",className:"authLink",onClick:function(){return r()},children:"Log In"})})]})})})]})},d=c(11),O=c(4),m=c(57),p=(c(146),c(16)),x=c.n(p);function v(e){return{status:!1,errorMessage:"Internal server error. Please check your server"}}function f(e){return{status:!0,data:e.data}}var g=x.a.create({baseURL:"".concat("https://mm-best-reads.herokuapp.com/api","/ebook")});var k=function(e){var t=e.user,c=t.privateBookshelf.shelves.find((function(e){return"Main shelf"===e.name})),n={title:"",author:"",coverUrl:"",ebookUrl:"",owner:t._id,shelf:c._id},a=Object(s.useState)(n),r=Object(o.a)(a,2),l=r[0],i=r[1];function b(e,t){"success"===e?m.b.warning(t,{position:"top-right",autoClose:3e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):m.b.error(t,{position:"top-right",autoClose:3e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}function j(e){var t=e.target,c=t.name,s=t.value;i(Object(O.a)(Object(O.a)({},l),{},Object(d.a)({},c,s)))}return console.log("test: ",l),Object(u.jsxs)("div",{children:[Object(u.jsx)(m.a,{}),Object(u.jsx)("h1",{children:"Create book: "}),Object(u.jsxs)("form",{onSubmit:function(e){var t;e.preventDefault(),(t=l,g.post("/create",t).then(f).catch(v)).then((function(e){return!0===e.status?(i(n),void b("success","Your Ebook was added to your bookshelf!")):b("error","There was an issue creating your Ebook")}))},className:"new-book-form",children:[Object(u.jsx)("label",{htmlFor:"input-title",children:"Title"}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{id:"input-title",type:"text",name:"title",placeholder:"Text",value:l.title,onChange:j,required:!0}),Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),Object(u.jsx)("label",{htmlFor:"input-author",children:"Author"}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{id:"input-authot",type:"text",name:"author",placeholder:"Text",value:l.author,onChange:j,required:!0}),Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),Object(u.jsx)("label",{htmlFor:"input-cover",children:"Cover"}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"button",className:"cloudinary-button",onClick:function(e){window.cloudinary.createUploadWidget({cloudName:"best-reads",uploadPreset:"bestReads-bookCovers",cropping:!0},(function(e,t){!function(e){"success"===e.event&&i(Object(O.a)(Object(O.a)({},l),{},{coverUrl:e.info.secure_url}))}(t)})).open()},value:"Add a cover"}),Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),Object(u.jsx)("label",{htmlFor:"input-ebook",children:"Ebook file"}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"button",className:"cloudinary-button",onClick:function(e){window.cloudinary.createUploadWidget({cloudName:"best-reads",uploadPreset:"bestReads-ebooks"},(function(e,t){!function(e){"success"===e.event&&i(Object(O.a)(Object(O.a)({},l),{},{ebookUrl:e.info.secure_url}))}(t)})).open()},value:"Add an ebook file"}),Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),Object(u.jsx)("label",{htmlFor:"input-bookshelf",children:"Add to: "}),Object(u.jsx)("select",{onChange:function(e){return i(Object(O.a)(Object(O.a)({},l),{},{shelf:e.target.value}))},children:t.privateBookshelf.shelves.map((function(e){return Object(u.jsx)("option",{name:"shelf",value:e._id,children:e.name})}))}),Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),Object(u.jsx)("button",{className:"button__submit",type:"submit",children:"Submit"})]})]})},N="access_token",y="newapp";y[0].toUpperCase(),y.slice(1).toLowerCase();function S(e){return{status:!1,errorMessage:"Internal server error. Please check your server"}}function w(e){return console.log("success: ",e),{status:!0,data:e.data}}var C=x.a.create({baseURL:"".concat("https://mm-best-reads.herokuapp.com/api","/auth")});function U(){return C.get("/session",{headers:{Authorization:localStorage.getItem(N)}}).then(w).catch(S)}c(164),c(41);var I=function(){return Object(u.jsx)("div",{className:"home",children:Object(u.jsxs)("div",{className:"home-img-container",children:[Object(u.jsx)("img",{src:"https://64.media.tumblr.com/11e061c672d56b817484963145163de9/912682de92279e4a-1a/s640x960/24725567374df17623ffe72b92965a9a711bd229.gifv",alt:"",className:"img-home"}),Object(u.jsxs)("div",{className:"home-headings",children:[Object(u.jsx)(i.b,{to:"/search",className:"tag center",children:"A NOVEL IDEA"}),Object(u.jsx)("p",{className:"quote center",children:'"At least we\'re not Amazon"'})]})]})})};c(95);var _=function(e){var t=Object(s.useState)({username:"",email:"",password:"",imageUrl:""}),c=Object(o.a)(t,2),n=c[0],a=c[1],r=function(e){var t=e.target,c=t.name,s=t.value;a(Object(O.a)(Object(O.a)({},n),{},Object(d.a)({},c,s)))};return Object(u.jsxs)("div",{className:"page-container",children:[Object(u.jsx)(I,{}),Object(u.jsxs)("div",{className:"signup-form-container",children:[Object(u.jsx)("h1",{children:"Sign Up"}),Object(u.jsxs)("p",{className:"account",children:["Account? ",Object(u.jsx)(i.b,{to:"/auth/login",className:"account",children:"Log In"})]}),Object(u.jsxs)("form",{onSubmit:function(t){var c;t.preventDefault(),(c=n,C.post("/signup",c).then(w).catch(S)).then((function(t){t.data?(localStorage.setItem(N,t.data.accessToken),e.authenticate(t.data.user),e.history.push("/")):console.log("error")}))},className:"login-form",children:[Object(u.jsxs)("div",{className:"inputs",children:[Object(u.jsx)("label",{htmlFor:"login-form-text",children:"Username"}),Object(u.jsx)("input",{type:"text",name:"username",placeholder:"Username",value:n.username,onChange:r,required:!0})]}),Object(u.jsxs)("div",{className:"inputs",children:[Object(u.jsx)("label",{htmlFor:"login-form-text",children:"Email"}),Object(u.jsx)("input",{type:"text",name:"email",placeholder:"Email",value:n.email,onChange:r,required:!0})]}),Object(u.jsxs)("div",{className:"inputs",children:[Object(u.jsx)("label",{htmlFor:"login-form-text",children:"Password"}),Object(u.jsx)("input",{type:"password",name:"password",placeholder:"Password",value:n.password,onChange:r,required:!0,minLength:"8"})]}),Object(u.jsx)("div",{className:"inputs",children:Object(u.jsx)("button",{className:"button__submit",type:"submit",children:"Submit"})})]})]})]})};var B=function(e){var t=e.authenticate;e.user&&e.user._id&&e.history.push("/");var c=Object(s.useState)({username:"",password:""}),n=Object(o.a)(c,2),a=n[0],r=n[1],l=function(e){var t=e.target,c=t.name,s=t.value;r(Object(O.a)(Object(O.a)({},a),{},Object(d.a)({},c,s)))};return Object(u.jsxs)("div",{className:"page-container",children:[Object(u.jsx)(I,{}),Object(u.jsxs)("div",{className:"login-form-container",children:[Object(u.jsx)("h1",{children:"Log In"}),Object(u.jsxs)("p",{className:"account",children:["No account? ",Object(u.jsx)(i.b,{to:"/auth/signup",className:"account",children:"Sign Up"})]}),Object(u.jsxs)("form",{onSubmit:function(c){c.preventDefault(),function(e){return C.post("/login",e).then(w).catch(S)}({username:a.username,password:a.password}).then((function(c){c.data?(localStorage.setItem(N,c.data.accessToken),t(c.data.user),e.history.push("/")):console.log("error",c)}))},className:"login-form",children:[Object(u.jsxs)("div",{className:"inputs",children:[Object(u.jsx)("label",{htmlFor:"login-form-text",children:"Username"}),Object(u.jsx)("input",{type:"text",name:"username",placeholder:"Username",value:a.username,onChange:l,required:!0})]}),Object(u.jsxs)("div",{className:"inputs",children:[Object(u.jsx)("label",{htmlFor:"login-form-text",children:"Password"}),Object(u.jsx)("input",{type:"password",name:"password",placeholder:"Password",value:a.password,onChange:l,required:!0,minLength:"8"})]}),Object(u.jsx)("div",{className:"inputs",children:Object(u.jsx)("button",{className:"login-form-text",type:"submit",children:"Submit"})})]})]})]})},F=(c(61),c(166)),E=new F("https://openlibrary.org/search.json{?q*}&limit=50");new F("https://openlibrary.org/search/{subSearch}.json{?q*}"),x.a.create({baseURL:"https://openlibrary.org"});function L(e){return{status:!1,errorMessage:"Error while querying the API. Please check your server"}}function A(e){return{data:e.data}}function P(e){var t=Object.entries(e).filter((function(e){var t=Object(o.a)(e,2);t[0];return""!==t[1]})),c=Object.fromEntries(t);return x.a.get(function(e){var t=E.expand({q:Object(O.a)({},e)});return console.log("url is:",t),t}(c)).then(A).catch(L)}function T(e){var t="https://openlibrary.org/books/".concat(e,".json");return x.a.get(t).then((function(e){return e.data})).catch((function(e){return console.log("Error getting a book from: ",t," ---Error: ",e)}))}var R=c.p+"static/media/default.b508dd32.jpeg";function q(e){return{status:!1,errorMessage:"Internal server error. Please check your server"}}function M(e){return console.log("shelves services success!",e),{status:!0,data:e.data}}var D=x.a.create({baseURL:"".concat("https://mm-best-reads.herokuapp.com/api","/public-shelves"),withCredentials:!0}),H=x.a.create({baseURL:"".concat("https://mm-best-reads.herokuapp.com/api","/private-shelves"),withCredentials:!0});function z(e,t){var c={shelf:e,book:t};return D.put("addBook",c).then(M).catch(q)}function W(e){var t=e.user,c=e.book,s=(e.search,e.type,t.publicBookshelf.shelves);return Object(u.jsx)("div",{className:"book-shelf-changer",children:Object(u.jsxs)("select",{onChange:function(e){return z(e.target.value,c)},children:[Object(u.jsx)("option",{selected:!0,disabled:!0,children:"Save to: "}),s.map((function(e){return Object(u.jsx)("option",{value:e._id,children:e.name})}))]})})}function J(e){var t=e.results;console.log("props: ",t);var c=e.user;c.publicBookshelf.shelves;function s(e){return{backgroundImage:"url(".concat(e,")"),backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover"}}return console.log("these are the shelves",c),Object(u.jsx)("div",{className:"bookshelf",children:Object(u.jsx)("div",{className:"bookshelf-books",children:Object(u.jsx)("ol",{className:"books-grid",children:t.map((function(e){return Object(u.jsxs)("div",{className:"book",children:[Object(u.jsxs)("div",{className:"book-top",children:[(t=e,t.coverUrl?Object(u.jsx)("div",{className:"book-cover",style:s(t.coverUrl),alt:"book cover"},t.coverUrl):Object(u.jsx)("div",{className:"book-cover",style:s(R),alt:"book cover"})),Object(u.jsx)(W,{book:e,user:c,search:!0,type:"book"})]}),Object(u.jsx)("div",{className:"book-title",children:e.title},e.title),Object(u.jsx)("div",{className:"book-author",children:e.author},e.author)]},e.id);var t}))})})})}c(167);var G=function(){return Object(u.jsx)("div",{className:"wrapper",children:Object(u.jsxs)("div",{className:"spinner",children:[Object(u.jsx)("div",{className:"bounce1"}),Object(u.jsx)("div",{className:"bounce2"}),Object(u.jsx)("div",{className:"bounce3"})]})})};var V=function(e){var t=Object(s.useState)({q:"",title:"",author:"",subject:"",place:"",person:"",language:"",publisher:""}),c=Object(o.a)(t,2),n=c[0],a=c[1],r=Object(s.useState)(!1),l=Object(o.a)(r,2),i=l[0],b=l[1],j=Object(s.useState)(!1),h=Object(o.a)(j,2),m=h[0],p=h[1],x=Object(s.useState)([]),v=Object(o.a)(x,2),f=v[0],g=v[1];function k(e){var t=e.target,c=t.name,s=t.value;a(Object(O.a)(Object(O.a)({},n),{},Object(d.a)({},c,s)))}function N(e){console.log("test"),e.preventDefault(),p(!0),P(n).then((function(e){g(e.data.docs.map((function(e){var t={author:e.author_name,title:e.title,_id:e.key.replace("/works/",""),olLink:"https://openlibrary.org".concat(e.key)};return e.cover_edition_key&&(t.coverUrl="https://covers.openlibrary.org/b/olid/".concat(e.cover_edition_key,"-M.jpg")),t}))),p(!1)})).catch((function(e){return console.log(e)}))}return Object(u.jsxs)("div",{className:"searchPage",children:[Object(u.jsxs)("form",{onSubmit:N,children:[Object(u.jsx)("label",{htmlFor:"main",children:"Search: "}),Object(u.jsx)("input",{type:"text",onChange:k,name:"q",value:n.q}),Object(u.jsx)("button",{type:"submit",children:"Search"})]}),Object(u.jsx)("br",{}),Object(u.jsx)("a",{href:"#",onClick:function(e){return b(!i)},children:" Advanced search"}),Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),i&&Object(u.jsx)("div",{children:Object(u.jsxs)("form",{onSubmit:function(e){N(e),b(!i)},children:[Object(u.jsx)("label",{htmlFor:"title",children:"Title: "}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"text",onChange:k,name:"title",value:n.title}),Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),Object(u.jsx)("label",{htmlFor:"title",children:"Author: "}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"text",onChange:k,name:"author",value:n.author}),Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),Object(u.jsx)("label",{htmlFor:"title",children:"Subject: "}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"text",onChange:k,name:"subject",value:n.subject}),Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),Object(u.jsx)("label",{htmlFor:"title",children:"Place: "}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"text",onChange:k,name:"place",value:n.place}),Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),Object(u.jsx)("label",{htmlFor:"title",children:"Person: "}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"text",onChange:k,name:"person",value:n.person}),Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),Object(u.jsx)("label",{htmlFor:"title",children:"Language: "}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"text",onChange:k,name:"language",value:n.language}),Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),Object(u.jsx)("label",{htmlFor:"title",children:"Publisher: "}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"text",onChange:k,name:"publisher",value:n.publisher}),Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),Object(u.jsx)("button",{type:"submit",children:"Search"})]})}),m?Object(u.jsx)(G,{}):Object(u.jsx)(J,{results:f,user:e.user})]})},Y=c(56),K=["exact","to","path","component"],Q=function(e){var t=e.exact,c=e.to,s=e.path,n=e.component,a=Object(Y.a)(e,K),r=n;return Object(u.jsx)(l.b,{exact:t,path:s||c,render:function(e){return Object(u.jsx)(r,Object(O.a)(Object(O.a)({},a),e))}})},X=["user","exact","to","path","component"],Z=function(e){var t=e.user,c=e.exact,s=e.to,n=e.path,a=e.component,r=Object(Y.a)(e,X),o=a;return t?Object(u.jsx)(l.b,{exact:c,path:n||s,render:function(e){return Object(u.jsx)(o,Object(O.a)(Object(O.a)(Object(O.a)({},r),e),{},{user:t}))}}):Object(u.jsx)(l.a,{to:"/auth/login"})};var $=function(e){var t=e.appendToShelf,c=e.updateUser;console.log("this is the data",t);var n=Object(s.useState)({name:"",ebooks:[],privateBookshelf:""}),a=Object(o.a)(n,2),r=a[0],l=a[1];return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"Create Shelf: "}),Object(u.jsxs)("form",{onSubmit:function(e){return e.preventDefault(),(s=r,H.post("/create",s).then(M).catch(q)).then((function(e){t.dynamicShelves=Object(O.a)(Object(O.a)({},t.dynamicShelves),{},{shelf:e}),c()})).catch((function(e){return console.log(e)}));var s},className:"new-shelf-form",children:[Object(u.jsx)("label",{children:"Name: "}),Object(u.jsx)("input",{type:"text",name:"name",placeholder:"Name your new shelf",value:r.name,onChange:function(e){var c,s=e.target,n=s.name,a=s.value;l(Object(O.a)(Object(O.a)({},r),{},(c={},Object(d.a)(c,n,a),Object(d.a)(c,"privateBookshelf",t._id),c)))},required:!0}),Object(u.jsx)("button",{className:"button__submit",type:"submit",children:"Submit"})]})]})};var ee=function(e){var t=e.appendToPubShelf,c=e.updateUser;console.log("this is the data",t);var n=Object(s.useState)({name:"",books:[],publicBookshelf:""}),a=Object(o.a)(n,2),r=a[0],l=a[1];return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"Create Shelf: "}),Object(u.jsxs)("form",{onSubmit:function(e){return e.preventDefault(),(s=r,D.post("/create",s).then(M).catch(q)).then((function(e){t.shelves=Object(O.a)(Object(O.a)({},t.shelves),{},{shelf:e}),c()})).catch((function(e){return console.log(e)}));var s},className:"new-shelf-form",children:[Object(u.jsx)("label",{children:"Name: "}),Object(u.jsx)("input",{type:"text",name:"name",placeholder:"Name your new shelf",value:r.name,onChange:function(e){var c,s=e.target,n=s.name,a=s.value;l(Object(O.a)(Object(O.a)({},r),{},(c={},Object(d.a)(c,n,a),Object(d.a)(c,"publicBookshelf",t._id),c)))},required:!0}),Object(u.jsx)("button",{className:"button__submit",type:"submit",children:"Submit"})]})]})};var te=function(e){var t=e.bookshelf.shelves,c=e.book,s=e.updateUser;function n(t,c,s){var n,a,r=s.bookId;return console.log(c),"public"===t?"delete"===c?function(e,t){return D.put("/deleteBook",{shelfId:e,bookId:t}).then(M).catch(q)}(e.shelf,r):(a=s,D.put("/moveBook",a).then(M).catch(q)):"delete"===c?(n=r,g.delete("/delete/".concat(n)).then(f).catch(v)):"edit"!==c?function(e){return H.put("/moveBook",e).then(M).catch(q)}(s):void console.log("edit")}function a(e){return{backgroundImage:"url(".concat(e,")"),backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover"}}function r(e){if(e.ebookUrl)return Object(u.jsx)(i.b,{to:"/reader/".concat(e._id),target:"blank",className:"link-tag",style:{position:"absolute",top:0,right:0,bottom:0,left:0,width:"100%",height:"100%"}})}return Object(u.jsxs)("div",{className:"book",children:[Object(u.jsxs)("div",{className:"book-top",children:[function(e){return e.ebookUrl?Object(u.jsx)("div",{className:"flip-card",children:Object(u.jsxs)("div",{className:"flip-card-inner",children:[Object(u.jsx)("div",{className:"book-cover flip-card-front",style:e.coverUrl?a(e.coverUrl):a(R),alt:"book cover"},e.coverUrl),Object(u.jsx)("div",{className:"flip-card-back",children:r(e)})]})}):Object(u.jsx)("div",{className:"book-cover",style:e.coverUrl?a(e.coverUrl):a(R),alt:"book cover"})}(c),Object(u.jsx)("div",{className:"book-shelf-changer",children:Object(u.jsxs)("select",{onChange:function(t){return n(e.bsType,t.target.value,{shelfFrom:e.shelf,shelfTo:t.target.value,bookId:c._id}).then((function(e){return!0===e.status?s():console.log(e)}))},children:[Object(u.jsx)("optgroup",{label:"Move to:"}),t.map((function(e){return Object(u.jsx)("option",{value:e._id,children:e.name})})),Object(u.jsx)("optgroup",{label:"--------"}),Object(u.jsx)("option",{value:"delete",children:"Delete"}),"private"===e.bsType&&Object(u.jsx)("option",{value:"edit",children:"Edit"})]})})]}),Object(u.jsx)("div",{className:"book-title",children:c.title},c.title),Object(u.jsx)("div",{className:"book-author",children:c.author},c.author)]},c._id)};var ce=function(e){var t=e.publicShelf,c=e.updateUser;console.log(t);var n=Object(s.useState)(t),a=Object(o.a)(n,2),r=a[0],l=a[1];return Object(s.useEffect)((function(){l(t)}),[t]),Object(u.jsx)("div",{className:"list-books",children:Object(u.jsxs)("div",{className:"list-books-title",children:[Object(u.jsx)("h1",{children:"MyReads"}),r.shelves&&r.shelves.length>0&&r.shelves.map((function(s){return Object(u.jsxs)("div",{className:"bookshelf",children:[Object(u.jsx)("h3",{children:s.name}),Object(u.jsx)("div",{className:"bookshelf-books",children:Object(u.jsx)("ol",{className:"books-grid",children:s.books&&s.books.map((function(n){return Object(u.jsx)(te,{book:n,user:e.user,bsType:"public",updateUser:c,bookshelf:t,shelf:s._id})}))})})]},s._id)}))]})})};var se=function(e){var t=e.privateShelf,c=e.updateUser,n=Object(s.useState)(t),a=Object(o.a)(n,2),r=a[0],l=a[1];return Object(s.useEffect)((function(){l(t)}),[t]),Object(u.jsx)("div",{className:"list-books",children:Object(u.jsxs)("div",{className:"list-books-title",children:[Object(u.jsx)("h1",{children:"MyEbooks"}),Object(u.jsx)(i.b,{to:"/ebook/create",children:"Add an ebook"}),r.shelves&&r.shelves.length>0&&r.shelves.map((function(s){return Object(u.jsxs)("div",{className:"bookshelf",children:[Object(u.jsx)("h3",{children:s.name}),Object(u.jsx)("div",{className:"bookshelf-books",children:Object(u.jsx)("ol",{className:"books-grid",children:s.ebooks&&s.ebooks.map((function(n){return Object(u.jsx)(te,{book:n,user:e.user,bsType:"private",bookshelf:t,shelf:s._id,updateUser:c})}))})})]},s._id)}))]})})};var ne=function(e){var t=e.user,c=(e.setUser,Object(s.useState)(t.username)),n=Object(o.a)(c,2),a=(n[0],n[1],Object(s.useState)(t.publicBookshelf)),r=Object(o.a)(a,2),l=r[0],i=r[1],b=Object(s.useState)(t.privateBookshelf),j=Object(o.a)(b,2),h=j[0],d=j[1],O=Object(s.useState)(t.reviews),m=Object(o.a)(O,2),p=(m[0],m[1],Object(s.useState)()),x=Object(o.a)(p,2),v=(x[0],x[1]),f=Object(s.useState)(),g=Object(o.a)(f,2),k=(g[0],g[1]);function y(){localStorage.getItem(N);U().then((function(e){e.data?(d(e.data.user.privateBookshelf),i(e.data.user.publicBookshelf),v(e.data.user.publicBookshelf.shelves),k(e.data.user.privateBookshelf.shelves)):console.log("RES IN CASE OF FAILURE",e)}))}return Object(s.useEffect)((function(){y()}),[]),Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"My Bookshelves"}),Object(u.jsx)("h4",{children:"Private Bookshelf"}),Object(u.jsx)(se,{privateShelf:h,user:t,updateUser:y}),Object(u.jsx)($,{appendToShelf:h,updateUser:y}),Object(u.jsx)("br",{}),Object(u.jsx)("h4",{children:"Public Bookshelf"}),Object(u.jsx)(ce,{publicShelf:l,user:t,updateUser:y}),Object(u.jsx)(ee,{appendToPubShelf:l,updateUser:y})]})};function ae(e){return{status:!1,errorMessage:"Internal server error. Please check your server"}}function re(e){return{status:!0,data:e.data}}var oe=x.a.create({baseURL:"".concat("https://mm-best-reads.herokuapp.com/api","/reviews")});c(168);var le=function(e){var t=e.match.params.bookId,c={owner:e.user._id,comment:"",bookId:t,rating:null},n=Object(s.useState)(c),a=Object(o.a)(n,2),r=a[0],l=a[1];function i(e){l(Object(O.a)(Object(O.a)({},r),{},{rating:e.target.value}))}return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"Book review: "}),Object(u.jsx)("div",{className:"container p-3",children:Object(u.jsxs)("form",{onSubmit:function(e){return e.preventDefault(),function(e){var t=e.bookId,c=e.owner,s=e.comment,n=e.rating;return oe.post("/".concat(t,"/new-review"),{owner:c,comment:s,rating:n}).then(re).catch(ae)}(r).then((function(e){return console.log("review submitted: ",e)})).catch((function(e){return console.log(e)}))},className:"row",children:[Object(u.jsx)("div",{className:"stars text-reviewCenter",children:Object(u.jsx)("div",{className:"col-md-12",children:Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("input",{onClick:i,type:"radio",id:"five",name:"rate",value:"5"}),Object(u.jsx)("label",{htmlFor:"five"}),Object(u.jsx)("input",{onClick:i,type:"radio",id:"four",name:"rate",value:"4"}),Object(u.jsx)("label",{htmlFor:"four"}),Object(u.jsx)("input",{onClick:i,type:"radio",id:"three",name:"rate",value:"3"}),Object(u.jsx)("label",{htmlFor:"three"}),Object(u.jsx)("input",{onClick:i,type:"radio",id:"two",name:"rate",value:"2"}),Object(u.jsx)("label",{htmlFor:"two"}),Object(u.jsx)("input",{onClick:i,type:"radio",id:"one",name:"rate",value:"1"}),Object(u.jsx)("label",{htmlFor:"one"}),Object(u.jsx)("span",{className:"result"})]})})}),Object(u.jsx)("div",{className:"col-md-6",children:Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("label",{htmlFor:"textarea",children:Object(u.jsx)("b",{children:"Review:"})}),Object(u.jsx)("textarea",{value:r.comment,name:"comment",onChange:function(e){var t=e.target,c=t.name,s=t.value;l(Object(O.a)(Object(O.a)({},r),{},Object(d.a)({},c,s)))},required:!0,className:"form-control",id:"textarea",rows:"4",placeholder:"What did you think of this book?"})]})}),Object(u.jsx)("div",{className:"col-md-12 text-right",children:Object(u.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Review"})})]})})]})};var ie=function(e){var t=e.olid,c=Object(s.useState)({}),n=Object(o.a)(c,2),a=n[0],r=(n[1],Object(s.useState)([])),l=Object(o.a)(r,2),b=l[0],j=l[1];return Object(s.useEffect)((function(){T(t).then((function(e){return console.log("This is coming through the use effect",e.data)})).then((function(){return(e=t,oe.get("/".concat(e,"/reviews")).then(re).catch(ae)).then((function(e){return j(e)}));var e})).catch((function(e){return console.log(e)}))}),[]),Object(u.jsxs)("div",{className:"single-book",children:[Object(u.jsx)("h2",{children:"Book details"}),Object(u.jsx)("h4",{children:a.title}),Object(u.jsx)("h6",{children:a.author}),Object(u.jsx)("img",{src:a.coverUrl,alt:"BookImg"}),Object(u.jsx)(i.b,{to:"/ol link should be here"}),Object(u.jsx)(le,{book:t}),Object(u.jsx)("h4",{children:"All Reviews:"}),Object(u.jsx)("div",{children:b.comment&&b.comment.map((function(e){return console.log("this is the current comment",e),Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:e.owner}),Object(u.jsx)("p",{children:e.comment}),Object(u.jsx)(i.b,{to:"/",children:e.comment})]},e._id)}))})]})},be=c(82);var je=function(e){var t=e.match.params.ebookId;console.log("eBookId",t);var c=Object(s.useState)(""),n=Object(o.a)(c,2),a=n[0],r=n[1];return Object(s.useEffect)((function(){(function(e){return g.get("/getBook/".concat(e)).then(f).catch(v)})(t).then((function(e){console.log(e.data),r(e.data)}))}),[]),Object(u.jsx)("div",{style:{height:"100vh"},children:Object(u.jsxs)("div",{style:{position:"relative",height:"100%"},children:[" ",Object(u.jsx)(be.ReactReader,{url:a.ebookUrl,title:a.title,location:"epubcfi(/6/2[cover]!/6)",locationChanged:function(e){return console.log(e)}})]})})};var ue=function(){var e=Object(s.useState)(null),t=Object(o.a)(e,2),c=t[0],n=t[1];Object(s.useEffect)((function(){var e=localStorage.getItem(N);e||n(null),U().then((function(e){e.data?n(e.data.user):(console.log("RES IN CASE OF FAILURE",e),n(null))}))}),[]);var a=function(e){console.log(e),n(e)};return console.log("user: ",c),Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)(h,{handleLogout:function(){var e=localStorage.getItem(N);e||n(null),C.delete("/logout",{headers:{Authorization:localStorage.getItem(N)}}).then(w).catch(S).then((function(e){e.status||console.error("\ud83d\udca1 SOMETHING HAPPENED THAT HAS TO DEALT WITH",e),localStorage.removeItem(N),n(null)}))},component:h,user:c}),Object(u.jsxs)(l.d,{children:[Object(u.jsx)(Q,{exact:!0,path:"/",authenticate:a,component:I}),Object(u.jsx)(Q,{exact:!0,path:"/",user:c,authenticate:a,component:I}),Object(u.jsx)(Q,{exact:!0,path:"/auth/signup",user:c,authenticate:a,component:_}),Object(u.jsx)(Q,{exact:!0,path:"/auth/login",user:c,authenticate:a,component:B}),Object(u.jsx)(Q,{exact:!0,path:"/details/:bookId",user:c,component:ie}),Object(u.jsx)(Z,{exact:!0,path:"/review/:bookId",user:c,component:le}),Object(u.jsx)(Z,{exact:!0,path:"/search",component:V,user:c}),Object(u.jsx)(Z,{exact:!0,path:"/auth/profile/user",component:ne,user:c,setUser:n}),Object(u.jsx)(Z,{exact:!0,path:"/ebook/create",component:k,user:c})]})]})};r.a.render(Object(u.jsx)(n.a.StrictMode,{children:Object(u.jsx)(i.a,{children:Object(u.jsxs)(l.d,{children:[Object(u.jsx)(l.b,{exact:!0,path:"/reader/:ebookId",component:je}),Object(u.jsx)(ue,{})]})})}),document.getElementById("root"))},41:function(e,t,c){},60:function(e,t,c){},95:function(e,t,c){}},[[282,1,2]]]);
//# sourceMappingURL=main.d4725769.chunk.js.map