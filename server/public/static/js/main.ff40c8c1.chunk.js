(this["webpackJsonpnewapp-client"]=this["webpackJsonpnewapp-client"]||[]).push([[0],{142:function(e,t,c){},166:function(e,t,c){},169:function(e,t,c){},170:function(e,t,c){},171:function(e,t,c){},172:function(e,t,c){},182:function(e,t,c){},183:function(e,t,c){},297:function(e,t,c){"use strict";c.r(t);var a=c(1),s=c.n(a),n=c(40),r=c.n(n),o=(c(142),c(2)),l=c(8),i=c(6),u=(c(85),c(0)),b=function(e){var t=Object(a.useState)(""),c=Object(o.a)(t,2),s=c[0],n=c[1],r=Object(a.useState)(""),l=Object(o.a)(r,2),b=l[0],j=l[1];function h(){n(""===s?"show":""),j(""===b?"show-x":"")}return Object(u.jsxs)("nav",{children:[Object(u.jsx)(i.b,{to:"/",className:"homeLogo",children:"Best Reads"}),Object(u.jsxs)("button",{onClick:h,id:"burger",className:"burger ".concat(b),children:[Object(u.jsx)("div",{className:"bar"}),Object(u.jsx)("div",{className:"bar"})]}),Object(u.jsx)("ul",{className:s,children:e.user?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("li",{children:Object(u.jsx)(i.b,{to:"/",activeclassname:"homebutton",onClick:h,children:"Home"})}),Object(u.jsx)("li",{children:Object(u.jsx)(i.b,{to:"/search",activeclassname:"active-link",onClick:h,children:"Searchbook"})}),Object(u.jsx)("li",{children:Object(u.jsx)(i.b,{to:"/user/publicBookshelf",activeclassname:"authLink",onClick:h,children:"My public bookshelf"})}),Object(u.jsx)("li",{children:Object(u.jsx)(i.b,{to:"/user/privateBookshelf",activeclassname:"authLink",onClick:h,children:"My private bookshelf"})}),Object(u.jsx)("li",{children:Object(u.jsx)(i.b,{to:"/ebook/create",activeclassname:"authLink",onClick:h,children:"Create an eBook"})}),Object(u.jsx)("li",{children:Object(u.jsx)(i.b,{to:"#",className:"nav-logoutbtn",onClick:e.handleLogout,children:"Logout"})})]}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("li",{children:Object(u.jsx)(i.b,{to:"/",className:"authLink",onClick:h,children:"Home"})}),Object(u.jsx)("li",{children:Object(u.jsx)(i.b,{to:"/auth/signup",activeclassname:"authLink",onClick:h,children:"Signup"})}),Object(u.jsx)("li",{children:Object(u.jsx)(i.b,{to:"/auth/login",className:"authLink",onClick:h,children:"Log In"})})]})})]})},j=c(10),h=c(3),d=c(56),m=(c(148),c(12)),O=c.n(m);function p(e){return{status:!1,errorMessage:"Internal server error. Please check your server"}}function v(e){return{status:!0,data:e.data}}var x=O.a.create({baseURL:"".concat("https://mm-best-reads.herokuapp.com/api","/ebook")});var f=c.p+"static/media/default.b508dd32.jpeg";c(59);function g(e){return{status:!1,errorMessage:"Internal server error. Please check your server"}}function k(e){return console.log("shelves services success!",e),{status:!0,data:e.data}}var N=O.a.create({baseURL:"".concat("https://mm-best-reads.herokuapp.com/api","/public-shelves"),withCredentials:!0}),y=O.a.create({baseURL:"".concat("https://mm-best-reads.herokuapp.com/api","/private-shelves"),withCredentials:!0});function S(e,t){var c={shelf:e,book:t};return N.put("addBook",c).then(k).catch(g)}var w=function(e){var t=e.bookshelf.shelves,c=e.book,a=e.updateUser;function s(t,c,a){var s,n,r=a.bookId;return console.log(c),"public"===t?"delete"===c?function(e,t){return N.put("/deleteBook",{shelfId:e,bookId:t}).then(k).catch(g)}(e.shelf,r):(n=a,N.put("/moveBook",n).then(k).catch(g)):"delete"===c?(s=r,x.delete("/delete/".concat(s)).then(v).catch(p)):"edit"!==c?function(e){return console.log("service: ",e),y.put("/moveBook",e).then(k).catch(g)}(a):void console.log("edit")}function n(e){return{backgroundImage:"url(".concat(e,")"),backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover"}}function r(e){if(e.ebookUrl)return Object(u.jsx)(i.b,{to:"/reader/".concat(e._id),target:"blank",className:"link-tag",style:{position:"absolute",top:0,right:0,bottom:0,left:0,width:"100%",height:"100%"}})}return Object(u.jsxs)("div",{className:"book",children:[Object(u.jsxs)("div",{className:"book-top",children:[function(e){return e.ebookUrl?Object(u.jsx)("div",{className:"flip-card",children:Object(u.jsxs)("div",{className:"flip-card-inner",children:[Object(u.jsx)("div",{className:"book-cover flip-card-front",style:e.coverUrl?n(e.coverUrl):n(f),alt:"book cover"},e.coverUrl),Object(u.jsx)("div",{className:"flip-card-back",children:r(e)})]})}):Object(u.jsx)("div",{className:"book-cover",style:e.coverUrl?n(e.coverUrl):n(f),alt:"book cover"})}(c),Object(u.jsx)("div",{className:"book-shelf-changer",children:Object(u.jsxs)("select",{className:"book-shelf-changer-select",onChange:function(t){return s(e.bsType,t.target.value,{shelfFrom:e.shelf,shelfTo:t.target.value,bookId:c._id}).then((function(e){return!0===e.status?a():console.log("the mover says: ",e)}))},children:[Object(u.jsx)("option",{selected:!0,disabled:!0,label:"Move to:"}),t.map((function(e){return Object(u.jsx)("option",{value:e._id,children:e.name})})),Object(u.jsx)("optgroup",{label:"--------"}),Object(u.jsx)("option",{value:"delete",children:"Delete"}),"private"===e.bsType&&Object(u.jsx)("option",{value:"edit",children:"Edit"})]})})]}),Object(u.jsx)("div",{className:"book-title",children:c.title},c.title)]},c._id)};var C=function(e){var t=e.user,c=t.privateBookshelf.shelves.find((function(e){return"Main shelf"===e.name})),s={title:"",author:"",coverUrl:"",ebookUrl:"",owner:t._id,shelf:c._id},n=Object(a.useState)(s),r=Object(o.a)(n,2),l=r[0],i=r[1];function b(e,t){"success"===e?d.b.warning(t,{position:"top-right",autoClose:3e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):d.b.error(t,{position:"top-right",autoClose:3e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}function m(e){var t=e.target,c=t.name,a=t.value;i(Object(h.a)(Object(h.a)({},l),{},Object(j.a)({},c,a)))}return console.log("test: ",l),Object(u.jsx)("div",{className:"searchPageMain",children:Object(u.jsxs)("div",{className:"searchPage",children:[Object(u.jsx)(d.a,{}),Object(u.jsx)("h1",{className:"ebook-create-title",children:"Create Your Ebook "}),Object(u.jsx)("div",{className:"searchFormContainer",children:Object(u.jsxs)("form",{onSubmit:function(e){var t;e.preventDefault(),(t=l,x.post("/create",t).then(v).catch(p)).then((function(e){return!0===e.status?(i(s),void b("success","Your Ebook was added to your bookshelf!")):b("error","There was an issue creating your Ebook")}))},className:"advLoginForm createEbookForm",children:[Object(u.jsxs)("div",{className:"inputsSearch create-ebook-form",children:[Object(u.jsx)("label",{htmlFor:"input-title",children:"Title "}),Object(u.jsx)("input",{type:"text",name:"title",placeholder:"Your Ebook Title",onChange:m,value:l.title,required:!0})]}),Object(u.jsxs)("div",{className:"inputsSearch create-ebook-form",children:[Object(u.jsx)("label",{htmlFor:"input-author",children:"Author "}),Object(u.jsx)("input",{type:"text",onChange:m,name:"author",placeholder:"Name",value:l.author})]}),Object(u.jsxs)("div",{className:"inputsSearch create-ebook-form",children:[Object(u.jsx)("label",{htmlFor:"input-cover",children:"Cover"}),Object(u.jsx)("input",{type:"button",className:"cloudinary-button",onClick:function(e){window.cloudinary.createUploadWidget({cloudName:"best-reads",uploadPreset:"bestReads-bookCovers",cropping:!0},(function(e,t){!function(e){"success"===e.event&&i(Object(h.a)(Object(h.a)({},l),{},{coverUrl:e.info.secure_url}))}(t)})).open()},value:"Add a cover"})]}),Object(u.jsxs)("div",{className:"inputsSearch create-ebook-form",children:[Object(u.jsx)("label",{htmlFor:"input-ebook",children:"Epub file"}),Object(u.jsx)("input",{type:"button",className:"cloudinary-button",onClick:function(e){window.cloudinary.createUploadWidget({cloudName:"best-reads",uploadPreset:"bestReads-ebooks"},(function(e,t){!function(e){"success"===e.event&&i(Object(h.a)(Object(h.a)({},l),{},{ebookUrl:e.info.secure_url}))}(t)})).open()},value:"Add an epub file"})]}),Object(u.jsxs)("div",{className:"inputsSearch create-ebook-form",children:[Object(u.jsx)("label",{htmlFor:"input-bookshelf",children:"Add to "}),Object(u.jsx)("select",{onChange:function(e){return i(Object(h.a)(Object(h.a)({},l),{},{shelf:e.target.value}))},children:t.privateBookshelf.shelves.map((function(e){return Object(u.jsx)("option",{name:"shelf",value:e._id,children:e.name},e._id)}))})]}),Object(u.jsx)("div",{className:"inputsSearch create-ebook-form",children:Object(u.jsx)("button",{type:"submit",children:"Submit"})})]})})]})})},I="access_token",_="newapp";_[0].toUpperCase(),_.slice(1).toLowerCase();function U(e){return{status:!1,errorMessage:"Internal server error. Please check your server"}}function F(e){return console.log("success: ",e),{status:!0,data:e.data}}var E=O.a.create({baseURL:"".concat("https://mm-best-reads.herokuapp.com/api","/auth")});function L(){return E.get("/session",{headers:{Authorization:localStorage.getItem(I)}}).then(F).catch(U)}c(166),c(41);var A=function(){return Object(u.jsx)("div",{className:"home",children:Object(u.jsxs)("div",{className:"home-img-container",children:[Object(u.jsx)("img",{src:"https://64.media.tumblr.com/11e061c672d56b817484963145163de9/912682de92279e4a-1a/s640x960/24725567374df17623ffe72b92965a9a711bd229.gifv",alt:"",className:"img-home"}),Object(u.jsxs)("div",{className:"home-headings",children:[Object(u.jsx)(i.b,{to:"/search",className:"tag center",children:"A NOVEL IDEA"}),Object(u.jsx)("p",{className:"quote center",children:'"At least we\'re not Amazon"'})]})]})})};var B=function(e){var t=Object(a.useState)({username:"",email:"",password:"",imageUrl:""}),c=Object(o.a)(t,2),s=c[0],n=c[1],r=function(e){var t=e.target,c=t.name,a=t.value;n(Object(h.a)(Object(h.a)({},s),{},Object(j.a)({},c,a)))};return Object(u.jsxs)("div",{className:"page-container",children:[Object(u.jsx)(A,{}),Object(u.jsxs)("div",{className:"signup-form-container",children:[Object(u.jsx)("h1",{children:"Sign Up"}),Object(u.jsxs)("p",{className:"account",children:["Account? ",Object(u.jsx)(i.b,{to:"/auth/login",className:"account",children:"Log In"})]}),Object(u.jsxs)("form",{onSubmit:function(t){var c;t.preventDefault(),(c=s,E.post("/signup",c).then(F).catch(U)).then((function(t){t.data?(localStorage.setItem(I,t.data.accessToken),e.authenticate(t.data.user),e.history.push("/")):console.log("error")}))},className:"login-form",children:[Object(u.jsxs)("div",{className:"inputs",children:[Object(u.jsx)("label",{htmlFor:"login-form-text",children:"Username"}),Object(u.jsx)("input",{type:"text",name:"username",placeholder:"Username",value:s.username,onChange:r,required:!0})]}),Object(u.jsxs)("div",{className:"inputs",children:[Object(u.jsx)("label",{htmlFor:"login-form-text",children:"Email"}),Object(u.jsx)("input",{type:"text",name:"email",placeholder:"Email",value:s.email,onChange:r,required:!0})]}),Object(u.jsxs)("div",{className:"inputs",children:[Object(u.jsx)("label",{htmlFor:"login-form-text",children:"Password"}),Object(u.jsx)("input",{type:"password",name:"password",placeholder:"Password",value:s.password,onChange:r,required:!0,minLength:"8"})]}),Object(u.jsx)("div",{className:"inputs",children:Object(u.jsx)("button",{className:"button__submit",type:"submit",children:"Submit"})})]})]})]})};var P=function(e){var t=e.authenticate;e.user&&e.user._id&&e.history.push("/");var c=Object(a.useState)({username:"",password:""}),s=Object(o.a)(c,2),n=s[0],r=s[1],l=function(e){var t=e.target,c=t.name,a=t.value;r(Object(h.a)(Object(h.a)({},n),{},Object(j.a)({},c,a)))};return Object(u.jsxs)("div",{className:"page-container",children:[Object(u.jsx)(A,{}),Object(u.jsxs)("div",{className:"login-form-container",children:[Object(u.jsx)("h1",{children:"Log In"}),Object(u.jsxs)("p",{className:"account",children:["No account? ",Object(u.jsx)(i.b,{to:"/auth/signup",className:"account",children:"Sign Up"})]}),Object(u.jsxs)("form",{onSubmit:function(c){c.preventDefault(),function(e){return E.post("/login",e).then(F).catch(U)}({username:n.username,password:n.password}).then((function(c){c.data?(localStorage.setItem(I,c.data.accessToken),t(c.data.user),e.history.push("/")):console.log("error",c)}))},className:"login-form",children:[Object(u.jsxs)("div",{className:"inputs",children:[Object(u.jsx)("label",{htmlFor:"login-form-text",children:"Username"}),Object(u.jsx)("input",{type:"text",name:"username",placeholder:"Username",value:n.username,onChange:l,required:!0})]}),Object(u.jsxs)("div",{className:"inputs",children:[Object(u.jsx)("label",{htmlFor:"login-form-text",children:"Password"}),Object(u.jsx)("input",{type:"password",name:"password",placeholder:"Password",value:n.password,onChange:l,required:!0,minLength:"8"})]}),Object(u.jsx)("div",{className:"inputs",children:Object(u.jsx)("button",{className:"login-form-text",type:"submit",children:"Submit"})})]})]})]})},R=c(167),q=new R("https://openlibrary.org/search.json{?q*}&limit=50");new R("https://openlibrary.org/search/{subSearch}.json{?q*}"),O.a.create({baseURL:"https://openlibrary.org"});function T(e){return{status:!1,errorMessage:"Error while querying the API. Please check your server"}}function M(e){return{data:e.data}}function H(e){var t=Object.entries(e).filter((function(e){var t=Object(o.a)(e,2);t[0];return""!==t[1]})),c=Object.fromEntries(t);return O.a.get(function(e){var t=q.expand({q:Object(h.a)({},e)});return console.log("url is:",t),t}(c)).then(M).catch(T)}function D(e){var t=e.user,c=e.book,a=t.publicBookshelf.shelves;return Object(u.jsx)("div",{className:"book-shelf-changer",children:Object(u.jsxs)("select",{onChange:function(e){return S(e.target.value,c)},children:[Object(u.jsx)("option",{selected:!0,disabled:!0,children:"Save to: "}),a.map((function(e){return Object(u.jsx)("option",{value:e._id,children:e.name},e._id)}))]})})}function z(e){var t=e.results,c=e.user;function a(e){return{backgroundImage:"url(".concat(e,")"),backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover"}}return Object(u.jsx)("div",{className:"bookshelf",children:Object(u.jsx)("div",{className:"bookshelf-books",children:Object(u.jsx)("ol",{className:"books-grid",children:t.map((function(e){return Object(u.jsxs)("div",{className:"book",children:[Object(u.jsxs)("div",{className:"book-top",children:[(t=e,Object(u.jsx)("div",{className:"flip-card",children:Object(u.jsxs)("div",{className:"flip-card-inner",children:[Object(u.jsx)("div",{className:"book-cover flip-card-front",style:t.coverUrl?a(t.coverUrl):a(f),alt:"book cover"},t.coverUrl),Object(u.jsx)("div",{className:"flip-card-back",children:Object(u.jsx)(i.b,{to:{pathname:"/details/".concat(t._id),query:{book:t,user:c}},className:"link-tag",style:{position:"absolute",top:0,right:0,bottom:0,left:0,width:"100%",height:"100%"}})})]})})),Object(u.jsx)(D,{book:e,user:c,search:!0,type:"book"})]}),Object(u.jsx)("div",{className:"book-title",children:e.title}),Object(u.jsx)("div",{className:"book-author",children:e.author})]},e._id);var t}))})})})}c(169);var W=function(){return Object(u.jsx)("div",{className:"wrapper",children:Object(u.jsxs)("div",{className:"spinner",children:[Object(u.jsx)("div",{className:"bounce1"}),Object(u.jsx)("div",{className:"bounce2"}),Object(u.jsx)("div",{className:"bounce3"})]})})};var Y=function(e){var t=Object(a.useState)({q:"",title:"",author:"",subject:"",place:"",person:"",language:"",publisher:""}),c=Object(o.a)(t,2),s=c[0],n=c[1],r=Object(a.useState)(!1),l=Object(o.a)(r,2),i=l[0],b=l[1],d=Object(a.useState)(!1),m=Object(o.a)(d,2),O=m[0],p=m[1],v=Object(a.useState)([]),x=Object(o.a)(v,2),f=x[0],g=x[1];function k(e){var t=e.target,c=t.name,a=t.value;n(Object(h.a)(Object(h.a)({},s),{},Object(j.a)({},c,a)))}function N(e){e.preventDefault(),p(!0),H(s).then((function(e){g(e.data.docs.map((function(e){var t={author:e.author_name,title:e.title,_id:e.key.replace("/works/",""),olLink:"https://openlibrary.org".concat(e.key)};return e.cover_edition_key&&(t.coverUrl="https://covers.openlibrary.org/b/olid/".concat(e.cover_edition_key,"-M.jpg")),t}))),p(!1)})).catch((function(e){return console.log(e)}))}return Object(u.jsx)("div",{className:"searchPageMain",children:Object(u.jsxs)("div",{className:"searchPage",children:[Object(u.jsxs)("form",{onSubmit:N,className:"searchForm",children:[Object(u.jsx)("label",{htmlFor:"searchbar-label"}),Object(u.jsx)("input",{className:"searchbarInput",type:"search",pattern:".*\\S.*",required:!0,onChange:k,name:"q",value:s.q}),Object(u.jsx)("span",{className:"caret"})]}),Object(u.jsxs)("div",{className:"searchFormContainer",children:[Object(u.jsx)("a",{nohref:"true",onClick:function(e){return b(!i)},children:" Advanced search"}),i&&Object(u.jsx)("div",{children:Object(u.jsxs)("form",{onSubmit:function(e){N(e),b(!i)},className:"advLoginForm",children:[Object(u.jsxs)("div",{className:"inputsSearch",children:[Object(u.jsx)("label",{htmlFor:"title",children:"Title "}),Object(u.jsx)("input",{type:"text",onChange:k,name:"title",value:s.title})]}),Object(u.jsxs)("div",{className:"inputsSearch",children:[Object(u.jsx)("label",{htmlFor:"title",children:"Author "}),Object(u.jsx)("input",{type:"text",onChange:k,name:"author",value:s.author})]}),Object(u.jsxs)("div",{className:"inputsSearch",children:[Object(u.jsx)("label",{htmlFor:"title",children:"Subject "}),Object(u.jsx)("input",{type:"text",onChange:k,name:"subject",value:s.subject})]}),Object(u.jsxs)("div",{className:"inputsSearch",children:[Object(u.jsx)("label",{htmlFor:"title",children:"Place "}),Object(u.jsx)("input",{type:"text",onChange:k,name:"place",value:s.place})]}),Object(u.jsxs)("div",{className:"inputsSearch",children:[Object(u.jsx)("label",{htmlFor:"title",children:"Person "}),Object(u.jsx)("input",{type:"text",onChange:k,name:"person",value:s.person})]}),Object(u.jsxs)("div",{className:"inputsSearch",children:[Object(u.jsx)("label",{htmlFor:"title",children:"Language "}),Object(u.jsx)("input",{type:"text",onChange:k,name:"language",value:s.language})]}),Object(u.jsxs)("div",{className:"inputsSearch",children:[Object(u.jsx)("label",{htmlFor:"title",children:"Publisher "}),Object(u.jsx)("input",{type:"text",onChange:k,name:"publisher",value:s.publisher})]}),Object(u.jsx)("div",{className:"inputsSearch",children:Object(u.jsx)("button",{type:"submit",children:"Search"})})]})}),O?Object(u.jsx)(W,{}):Object(u.jsx)(z,{results:f,user:e.user})]})]})})},J=c(55),G=["exact","to","path","component"],V=function(e){var t=e.exact,c=e.to,a=e.path,s=e.component,n=Object(J.a)(e,G),r=s;return Object(u.jsx)(l.b,{exact:t,path:a||c,render:function(e){return Object(u.jsx)(r,Object(h.a)(Object(h.a)({},n),e))}})},K=["user","exact","to","path","component"],Q=function(e){var t=e.user,c=e.exact,a=e.to,s=e.path,n=e.component,r=Object(J.a)(e,K),o=n;return t?Object(u.jsx)(l.b,{exact:c,path:s||a,render:function(e){return Object(u.jsx)(o,Object(h.a)(Object(h.a)(Object(h.a)({},r),e),{},{user:t}))}}):Object(u.jsx)(l.a,{to:"/auth/login"})};function X(e){return{status:!1,errorMessage:"Internal server error. Please check your server"}}function Z(e){return{status:!0,data:e.data}}var $=O.a.create({baseURL:"".concat("https://mm-best-reads.herokuapp.com/api","/reviews")});c(170);var ee=function(e){var t=e.user,c=e.bookId,s={owner:t&&t._id,comment:"",bookId:c,rating:null},n=Object(a.useState)(s),r=Object(o.a)(n,2),l=r[0],i=r[1];function b(e){i(Object(h.a)(Object(h.a)({},l),{},{rating:e.target.value}))}return Object(u.jsx)("div",{children:Object(u.jsxs)("form",{onSubmit:function(e){return e.preventDefault(),function(e){var t=e.bookId,c=e.owner,a=e.comment,s=e.rating;return $.post("/".concat(t,"/new-review"),{owner:c,comment:a,rating:s}).then(Z).catch(X)}(l).then((function(e){return console.log("review submitted: ",e)})).catch((function(e){return console.log(e)}))},className:"row",children:[Object(u.jsxs)("div",{id:"like",className:"rating",children:[Object(u.jsx)("input",{onClick:b,type:"radio",id:"heart_5",name:"like",value:"5"}),Object(u.jsx)("label",{htmlFor:"heart_5",title:"Five",children:"\u2764"}),Object(u.jsx)("input",{onClick:b,type:"radio",id:"heart_4",name:"like",value:"4"}),Object(u.jsx)("label",{htmlFor:"heart_4",title:"Four",children:"\u2764"}),Object(u.jsx)("input",{onClick:b,type:"radio",id:"heart_3",name:"like",value:"3"}),Object(u.jsx)("label",{htmlFor:"heart_3",title:"Three",children:"\u2764"}),Object(u.jsx)("input",{onClick:b,type:"radio",id:"heart_2",name:"like",value:"2"}),Object(u.jsx)("label",{htmlFor:"heart_2",title:"Two",children:"\u2764"}),Object(u.jsx)("input",{onClick:b,type:"radio",id:"heart_1",name:"like",value:"1"}),Object(u.jsx)("label",{htmlFor:"heart_1",title:"One",children:"\u2764"})]}),Object(u.jsxs)("div",{className:"review-section",children:[Object(u.jsx)("h3",{children:"Review this book "}),Object(u.jsx)("textarea",{value:l.comment,name:"comment",onChange:function(e){var t=e.target,c=t.name,a=t.value;i(Object(h.a)(Object(h.a)({},l),{},Object(j.a)({},c,a)))},required:!0,className:"form-control",cols:"32",rows:"6",placeholder:"What did you think?"}),Object(u.jsx)("button",{type:"submit",children:"Review"})]})]})})};c(171);var te=function(e){var t=e.match.params.bookId,c=e.user,s=Object(a.useState)({}),n=Object(o.a)(s,2),r=n[0],l=n[1],i=Object(a.useState)([]),b=Object(o.a)(i,2),j=b[0],h=b[1];return Object(a.useEffect)((function(){var e;(e=t,O.a.get("https://openlibrary.org/search.json?q=".concat(e,"&limit=50")).then(M).catch(T)).then((function(e){return l(function(e){var t={author:e.author_name,title:e.title,_id:e.key.replace("/works/",""),olLink:"https://openlibrary.org".concat(e.key)};return e.cover_edition_key&&(t.coverUrl="https://covers.openlibrary.org/b/olid/".concat(e.cover_edition_key,"-L.jpg")),t}(e.data.docs[0]))})),function(e){return $.get("/".concat(e,"/reviews")).then(Z).catch(X)}(t).then((function(e){return h(e.data)}))}),[t]),Object(u.jsxs)("div",{className:"details-page-container",children:[Object(u.jsxs)("div",{className:"details-main",children:[Object(u.jsx)("h2",{children:r.title}),Object(u.jsx)("img",{src:r.coverUrl,alt:""}),Object(u.jsx)("a",{href:r.olLink,target:"blank",children:"See Open Library page"}),Object(u.jsx)(ee,{user:c,bookId:t})]}),Object(u.jsx)("div",{className:"details-reviews",children:j.map((function(e){return Object(u.jsxs)("div",{className:"review-comments",children:[Object(u.jsxs)("h6",{children:[e.rating," \u2764"]}),Object(u.jsxs)("p",{children:['"',e.comment,'"']})]})}))})]})};c(172);var ce=function(e){var t=e.updateUser,c=e.toggleHandler,s=e.bookshelfId,n=Object(a.useState)({name:"",ebooks:[],privateBookshelf:""}),r=Object(o.a)(n,2),l=r[0],i=r[1];return Object(u.jsx)("div",{className:"modal-body",children:Object(u.jsxs)("div",{className:"column",id:"main",children:[Object(u.jsx)("a",{nohref:"true",title:"Close",className:"modal-close",onClick:c,children:"Close"}),Object(u.jsx)("h1",{className:"create-shelf-title",children:"Create a new Shelf: "}),Object(u.jsxs)("form",{onSubmit:function(e){return e.preventDefault(),(a=l,y.post("/create",a).then(k).catch(g)).then((function(e){console.log("new shelf: ",e),t(),c()})).catch((function(e){return console.log(e)}));var a},className:"new-shelf-form",children:[Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("label",{htmlFor:"exampleInputName",children:"Name: "}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"text",className:"new-shelf-input",name:"name",placeholder:"e.g. Best Sci-Fi 2020",value:l.name,onChange:function(e){var t,c=e.target,a=c.name,n=c.value;i(Object(h.a)(Object(h.a)({},l),{},(t={},Object(j.a)(t,a,n),Object(j.a)(t,"privateBookshelf",s),t)))},required:!0})]}),Object(u.jsx)("button",{type:"submit",className:"new-shelf-button",children:"Submit"})]})]})})},ae=c(84),se=c.n(ae),ne={content:{top:"30%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}};se.a.setAppElement("#root");var re=function(e){var t=e.user,c=Object(a.useState)(t.privateBookshelf),s=Object(o.a)(c,2),n=s[0],r=s[1],l=Object(a.useState)(!1),b=Object(o.a)(l,2),j=b[0],h=b[1];function d(){h(!1)}function m(){localStorage.getItem(I);L().then((function(e){e.data?r(e.data.user.privateBookshelf):console.log("RES IN CASE OF FAILURE",e)}))}var O=Object(a.useState)(n),p=Object(o.a)(O,2),v=p[0],x=p[1];return Object(a.useEffect)((function(){x(n)}),[n]),Object(a.useEffect)((function(){m()}),[]),Object(u.jsxs)("div",{className:"bookshelf-main-page",children:[Object(u.jsx)("div",{className:"bookshelf-name",children:Object(u.jsxs)("h1",{className:"cloud-text",children:[t.username,"'s private bookshelf"]})}),Object(u.jsx)("div",{className:"list-books-title",children:Object(u.jsxs)("div",{className:"link-to-create-card",children:[Object(u.jsx)("div",{className:"library-gif"}),Object(u.jsxs)("div",{className:"product-details",children:[Object(u.jsx)("h1",{children:"Your own library, always with you."}),Object(u.jsx)("p",{children:"Add your own ebooks, organize your collection in personalized shelves, and read online."}),Object(u.jsxs)("div",{className:"buttons-div-bs",children:[Object(u.jsx)(i.b,{className:"create-ebook-button",to:"/ebook/create",children:"Add an ebook"}),Object(u.jsx)(i.b,{onClick:function(){h(!0)},className:"create-shelf-button",children:"Create a new shelf"}),Object(u.jsx)(se.a,{isOpen:j,onRequestClose:d,style:ne,contentLabel:"Example Modal",children:Object(u.jsx)(ce,{bookshelfId:n,toggleHandler:d,updateUser:m})})]})]})]})}),v&&v.shelves&&v.shelves.length>0&&v.shelves.map((function(t){return Object(u.jsxs)("div",{className:"bookshelf",children:[Object(u.jsx)("h3",{className:"cloud-title",children:t.name}),Object(u.jsx)("div",{className:"bookshelf-books",children:Object(u.jsx)("ol",{className:"books-grid",children:t.ebooks&&t.ebooks.map((function(c){return Object(u.jsx)(w,{book:c,user:e.user,bsType:"private",bookshelf:n,shelf:t._id,updateUser:m},c._id)}))})})]},t._id)}))]})};c(182);var oe=function(e){var t=e.user,c=Object(a.useState)(t.publicBookshelf),s=Object(o.a)(c,2),n=s[0],r=s[1],l=Object(a.useState)(),i=Object(o.a)(l,2),b=(i[0],i[1]);function j(){localStorage.getItem(I);L().then((function(e){e.data?(r(e.data.user.publicBookshelf),b(e.data.user.publicBookshelf.shelves)):console.log("RES IN CASE OF FAILURE",e)}))}var h=Object(a.useState)(n),d=Object(o.a)(h,2),m=d[0],O=d[1];return Object(a.useEffect)((function(){O(n)}),[n]),Object(a.useEffect)((function(){j()}),[]),Object(u.jsxs)("div",{className:"bookshelf-main-page",children:[Object(u.jsx)("div",{className:"bookshelf-name",children:Object(u.jsxs)("h1",{className:"cloud-text",children:[t.username,"'s public bookshelf"]})}),Object(u.jsx)("div",{className:"list-books-shelf",children:m&&m.shelves&&m.shelves.length>0&&m.shelves.map((function(t){return Object(u.jsxs)("div",{className:"bookshelf",children:[Object(u.jsx)("h3",{className:"cloud-title",children:t.name}),Object(u.jsx)("div",{className:"bookshelf-books",children:Object(u.jsx)("ol",{className:"books-grid",children:t.books&&t.books.map((function(c){return Object(u.jsx)(w,{book:c,user:e.user,bsType:"public",updateUser:j,bookshelf:n,shelf:t._id},c._id)}))})})]},t._id)}))})]})};c(183);var le=function(){var e=Object(a.useState)(null),t=Object(o.a)(e,2),c=t[0],s=t[1];Object(a.useEffect)((function(){var e=localStorage.getItem(I);e||s(null),L().then((function(e){e.data?s(e.data.user):(console.log("RES IN CASE OF FAILURE",e),s(null))}))}),[]);var n=function(e){console.log(e),s(e)};return console.log("user from app: ",c),Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)(b,{handleLogout:function(){var e=localStorage.getItem(I);e||s(null),E.delete("/logout",{headers:{Authorization:localStorage.getItem(I)}}).then(F).catch(U).then((function(e){e.status||console.error("\ud83d\udca1 SOMETHING HAPPENED THAT HAS TO DEALT WITH",e),localStorage.removeItem(I),s(null)}))},component:b,user:c}),Object(u.jsxs)(l.d,{children:[Object(u.jsx)(V,{exact:!0,path:"/",authenticate:n,component:A}),Object(u.jsx)(V,{exact:!0,path:"/",user:c,authenticate:n,component:A}),Object(u.jsx)(V,{exact:!0,path:"/auth/signup",user:c,authenticate:n,component:B}),Object(u.jsx)(V,{exact:!0,path:"/auth/login",user:c,authenticate:n,component:P}),Object(u.jsx)(V,{exact:!0,path:"/details/:bookId",user:c,component:te}),Object(u.jsx)(Q,{exact:!0,path:"/review/:bookId",user:c,component:ee}),Object(u.jsx)(Q,{exact:!0,path:"/search",component:Y,user:c}),Object(u.jsx)(Q,{exact:!0,path:"/user/privateBookshelf",component:re,user:c,setUser:s}),Object(u.jsx)(Q,{exact:!0,path:"/user/publicBookshelf",component:oe,user:c,setUser:s}),Object(u.jsx)(Q,{exact:!0,path:"/ebook/create",component:C,user:c})]})]})},ie=c(81);var ue=function(e){var t=e.match.params.ebookId;console.log("eBookId",t);var c=Object(a.useState)(""),s=Object(o.a)(c,2),n=s[0],r=s[1];return Object(a.useEffect)((function(){(function(e){return x.get("/getBook/".concat(e)).then(v).catch(p)})(t).then((function(e){console.log(e.data),r(e.data)}))}),[]),Object(u.jsx)("div",{style:{height:"100vh"},children:Object(u.jsxs)("div",{style:{position:"relative",height:"100%"},children:[" ",Object(u.jsx)(ie.ReactReader,{url:n.ebookUrl,title:n.title,location:"epubcfi(/6/2[cover]!/6)",locationChanged:function(e){return console.log(e)}})]})})};r.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(i.a,{children:Object(u.jsxs)(l.d,{children:[Object(u.jsx)(l.b,{exact:!0,path:"/reader/:ebookId",component:ue}),Object(u.jsx)(le,{})]})})}),document.getElementById("root"))},41:function(e,t,c){},59:function(e,t,c){},85:function(e,t,c){}},[[297,1,2]]]);
//# sourceMappingURL=main.ff40c8c1.chunk.js.map